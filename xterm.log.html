<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--
 *****************************************************************************
 * Copyright 1997,1998,1999 by Thomas E. Dickey (dickey@clark.net)           *
 * All Rights Reserved.                                                      *
 *                                                                           *
 * Permission to use, copy, modify, and distribute this software and its     *
 * documentation for any purpose and without fee is hereby granted, provided *
 * that the above copyright notice appear in all copies and that both that   *
 * copyright notice and this permission notice appear in supporting          *
 * documentation, and that the name of the above listed copyright holder(s)  *
 * not be used in advertising or publicity pertaining to distribution of the *
 * software without specific, written prior permission.                      *
 *                                                                           *
 * THE ABOVE LISTED COPYRIGHT HOLDER(S) DISCLAIM ALL WARRANTIES WITH REGARD  *
 * TO THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND *
 * FITNESS, IN NO EVENT SHALL THE ABOVE LISTED COPYRIGHT HOLDER(S) BE LIABLE *
 * FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES         *
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN     *
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF   *
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.            *
 *****************************************************************************
  $XFree86: xc/programs/xterm/xterm.log.html,v 1.38 1999/09/27 06:30:24 dawes Exp $
  -->
<HTML>
<HEAD>
<TITLE>XTERM - Change Log</TITLE>
<LINK REV=MADE HREF="mailto:dickey@clark.net">
</HEAD>
<BODY>
<HR>
Copyright 1997,1998,1999 by Thomas E. Dickey
<HR>
<H1>Contents</H1>
This file contains a list of the changes that I have made for XFree86 xterm,
from the notes that I add when submitting a patch.
<P>
You should note that other changes have been made as well, by other people,
to fix bugs and correct ifdef's for portability.  All of these are summarized
in the XFree86 CHANGELOG (found in the unbundled tree,
xc/programs/Xserver/hw/xfree86).

<UL>
<LI><A HREF="#xterm_116">Patch #116 - 1999/9/25 - XFree86 3.9.16a</A>
<LI><A HREF="#xterm_115">Patch #115 - 1999/9/18 - XFree86 3.9.16a</A>
<LI><A HREF="#xterm_114">Patch #114 - 1999/9/15 - XFree86 3.9.16</A>
<LI><A HREF="#xterm_113">Patch #113 - 1999/8/15 - XFree86 3.9.15b</A>
<LI><A HREF="#xterm_112">Patch #112 - 1999/7/17 - XFree86 3.9Pw</A>
<LI><A HREF="#xterm_111">Patch #111 - 1999/7/10 - XFree86 3.9Pw</A>
<LI><A HREF="#xterm_110">Patch #110 - 1999/6/29 - XFree86 3.9Pu</A>
<LI><A HREF="#xterm_109">Patch #109 - 1999/6/23 - XFree86 3.9Pt</A>
<LI><A HREF="#xterm_108">Patch #108 - 1999/6/19 - XFree86 3.9Ps</A>
<LI><A HREF="#xterm_107">Patch #107 - 1999/6/12 - XFree86 3.9Pq</A>
<LI><A HREF="#xterm_106">Patch #106 - 1999/6/9 - XFree86 3.9Pq</A>
<LI><A HREF="#xterm_105">Patch #105 - 1999/6/5 - XFree86 3.9Pp</A>
<LI><A HREF="#xterm_104">Patch #104 - 1999/5/30 - XFree86 3.9Pn</A>
<LI><A HREF="#xterm_103">Patch #103 - 1999/5/14 - XFree86 3.9Pm</A>
<LI><A HREF="#xterm_102">Patch #102 - 1999/5/12 - XFree86 3.9Pm</A>
<LI><A HREF="#xterm_101">Patch #101 - 1999/5/10 - XFree86 3.9Pm</A>
<LI><A HREF="#xterm_100">Patch #100 - 1999/5/3 - XFree86 3.9Pl</A>
<LI><A HREF="#xterm_99">Patch #99 - 1999/5/2 - XFree86 3.9Pk</A>
<LI><A HREF="#xterm_98">Patch #98 - 1999/4/26 - XFree86 3.9Pk</A>
<LI><A HREF="#xterm_97">Patch #97 - 1999/4/25 - XFree86 3.9Pk</A>
<LI><A HREF="#xterm_96">Patch #96 - 1999/4/19 - XFree86 3.9Pj</A>
<LI><A HREF="#xterm_95">Patch #95 - 1999/4/5 - XFree86 3.9Ph</A>
<LI><A HREF="#xterm_94">Patch #94 - 1999/3/27 - XFree86 3.9Pf</A>
<LI><A HREF="#xterm_93">Patch #93 - 1999/3/14 - XFree86 3.9Pd</A>
<LI><A HREF="#xterm_92">Patch #92 - 1999/2/5 - XFree86 3.9Nz</A>
<LI><A HREF="#xterm_91">Patch #91 - 1999/1/21 - XFree86 3.9Nw</A>
<LI><A HREF="#xterm_90">Patch #90 - 1998/12/13 - XFree86 3.9Nq</A>
<LI><A HREF="#xterm_89">Patch #89 - 1998/11/20 - XFree86 3.9Nm</A>
<LI><A HREF="#xterm_88">Patch #88 - 1998/10/31 - XFree86 3.9Nk and 3.3.2h</A>
<LI><A HREF="#xterm_87">Patch #87 - 1998/10/21 - XFree86 3.9Nj and 3.3.2f</A>
<LI><A HREF="#xterm_86">Patch #86 - 1998/10/14 - XFree86 3.9Nj and 3.3.2e</A>
<LI><A HREF="#xterm_85">Patch #85 - 1998/10/12 - XFree86 3.9Nj and 3.3.2e</A>
<LI><A HREF="#xterm_84">Patch #84 - 1998/10/9 - XFree86 3.9Ni and 3.3.2e</A>
<LI><A HREF="#sync_83">Resync #83 - 1998/10/7 - XFree86 3.3.2e</A>
<LI><A HREF="#xterm_83">Patch #83 - 1998/8/25 - XFree86 3.9Nb</A>
<LI><A HREF="#xterm_82">Patch #82 - 1998/7/15 - XFree86 3.9Aj</A>
<LI><A HREF="#xterm_81">Patch #81 - 1998/7/14 - XFree86 3.9Aj</A>
<LI><A HREF="#xterm_80">Patch #80 - 1998/6/29 - XFree86 3.9Ai</A>
<LI><A HREF="#xterm_79">Patch #79 - 1998/6/28 - XFree86 3.9Ai</A>
<LI><A HREF="#xterm_78">Patch #78 - 1998/6/3 - XFree86 3.9Ah and 3.3.2</A>
<LI><A HREF="#xterm_77">Patch #77 - 1998/5/26 - XFree86 3.9Ah and 3.3.2</A>
<LI><A HREF="#xterm_76">Patch #76 - 1998/5/8 - XFree86 3.9Ah and 3.3.2</A>
<LI><A HREF="#xterm_75">Patch #75 - 1998/5/7 - XFree86 3.9Ah and 3.3.2</A>
<LI><A HREF="#xterm_74">Patch #74 - 1998/4/27 - XFree86 3.9Ag and 3.3.2</A>
<LI><A HREF="#xterm_73">Patch #73 - 1998/4/25 - XFree86 3.9Ag and 3.3.2</A>
<LI><A HREF="#xterm_72">Patch #72 - 1998/4/17 - XFree86 3.9Ag and 3.3.2</A>
<LI><A HREF="#xterm_71">Patch #71 - 1998/4/12 - XFree86 3.9Ag and 3.3.2</A>
<LI><A HREF="#xterm_70">Patch #70 - 1998/3/29 - XFree86 3.9Af and 3.3.2</A>
<LI><A HREF="#xterm_69">Patch #69 - 1998/3/16 - XFree86 3.9Ad and 3.3.2</A>
<LI><A HREF="#xterm_68">Patch #68 - 1998/3/4 - XFree86 3.9Ad and 3.3.1z</A>
<LI><A HREF="#xterm_67">Patch #67 - 1998/2/23 - XFree86 3.9Ad and 3.3.1e</A>
<LI><A HREF="#xterm_66">Patch #66 - 1998/2/16 - XFree86 3.9Ad and 3.3.1d</A>
<LI><A HREF="#xterm_65">Patch #65 - 1998/2/14 - XFree86 3.9Ad and 3.3.1c</A>
<LI><A HREF="#xterm_64">Patch #64 - 1998/2/8 - XFree86 3.9Ad</A>
<LI><A HREF="#xterm_63">Patch #63 - 1998/2/5 - XFree86 3.9Ad</A>
<LI><A HREF="#xterm_62">Patch #62 - 1998/1/23 - XFree86 3.9Ac</A>
<LI><A HREF="#xterm_61">Patch #61 - 1998/1/17 - XFree86 3.9Ac</A>
<LI><A HREF="#xterm_60">Patch #60 - 1998/1/10 - XFree86 3.9Ab</A>
<LI><A HREF="#xterm_59">Patch #59 - 1998/1/5 - XFree86 3.9Ab</A>
<LI><A HREF="#xterm_58">Patch #58 - 1998/1/3 - XFree86 3.9Ab</A>
<LI><A HREF="#xterm_57">Patch #57 - 1997/12/26 - XFree86 3.9Aa</A>
<LI><A HREF="#xterm_56">Patch #56 - 1997/11/28 - XFree86 3.9x</A>
<LI><A HREF="#xterm_55">Patch #55 - 1997/11/25 - XFree86 3.9x</A>
<LI><A HREF="#xterm_54">Patch #54 - 1997/10/17 - XFree86 3.9s</A>
<LI><A HREF="#xterm_53">Patch #53 - 1997/10/12 - XFree86 3.9r</A>
<LI><A HREF="#xterm_52">Patch #52 - 1997/9/29 - XFree86 3.9q</A>
<LI><A HREF="#xterm_51">Patch #51 - 1997/9/15 - XFree86 3.9p</A>
<LI><A HREF="#xterm_50">Patch #50 - 1997/8/22 - XFree86 3.9m</A>
<LI><A HREF="#xterm_49">Patch #49 - 1997/8/10 - XFree86 3.9k</A>
<LI><A HREF="#xterm_48">Patch #48 - 1997/7/26 - XFree86 3.9j</A>
<LI><A HREF="#xterm_47">Patch #47 - 1997/7/13 - XFree86 3.9i</A>
<LI><A HREF="#xterm_46">Patch #46 - 1997/7/4 - XFree86 3.9h</A>
<LI><A HREF="#xterm_45">Patch #45 - 1997/7/2 - XFree86 3.9h</A>
<LI><A HREF="#xterm_44">Patch #44 - 1997/6/22 - XFree86 3.9g</A>
<LI><A HREF="#xterm_43">Patch #43 - 1997/6/10 - XFree86 3.9d</A>
<LI><A HREF="#xterm_42">Patch #42 - 1997/6/8 - XFree86 3.2Xl</A>
<LI><A HREF="#xterm_41">Patch #41 - 1997/5/28 - XFree86 3.2Xl</A>
<LI><A HREF="#xterm_40">Patch #40 - 1997/5/26 - XFree86 3.2Xl</A>
<LI><A HREF="#xterm_39">Patch #39 - 1997/5/24 - XFree86 3.2Xl</A>
<LI><A HREF="#xterm_38">Patch #38 - 1997/5/22 - XFree86 3.2Xh</A>
<LI><A HREF="#xterm_37">Patch #37 - 1997/5/7 - XFree86 3.9a</A>
<LI><A HREF="#xterm_36">Patch #36 - 1997/1/16 - XFree86 3.2r</A>
<LI><A HREF="#xterm_35">Patch #35 - 1997/1/7 - XFree86 3.2o</A>
<LI><A HREF="#xterm_34">Patch #34 - 1997/1/5 - XFree86 3.2o</A>
<LI><A HREF="#xterm_33">Patch #33 - 1996/11/24 - XFree86 3.2</A>
<LI><A HREF="#xterm_32">Patch #32 - 1996/11/21 - XFree86 3.2</A>
<LI><A HREF="#xterm_31">Patch #31 - 1996/11/16 - XFree86 3.2</A>
<LI><A HREF="#xterm_30">Patch #30 - 1996/11/16 - XFree86 3.2</A>
<LI><A HREF="#xterm_29">Patch #29 - 1996/9/15 - XFree86 3.1.2Gb</A>
<LI><A HREF="#xterm_28">Patch #28 - 1996/8/31 - XFree86 3.1.2F</A>
<LI><A HREF="#xterm_27">Patch #27 - 1996/8/21 - XFree86 3.1.2Ek</A>
<LI><A HREF="#xterm_26">Patch #26 - 1996/8/20 - XFree86 3.1.2Ei</A>
<LI><A HREF="#xterm_25">Patch #25 - 1996/8/18 - XFree86 3.1.2Ei</A>
<LI><A HREF="#xterm_24">Patch #24 - 1996/8/11 - XFree86 3.1.2Ee</A>
<LI><A HREF="#xterm_23">Patch #23 - 1996/7/31 - XFree86 3.1.2Ec</A>
<LI><A HREF="#xterm_22">Patch #22 - 1996/7/26 - XFree86 3.1.2Ec</A>
<LI><A HREF="#xterm_21">Patch #21 - 1996/7/24 - XFree86 3.1.2Ec</A>
<LI><A HREF="#xterm_20">Patch #20 - 1996/7/24 - XFree86 3.1.2Ec</A>
<LI><A HREF="#xterm_19">Patch #19 - 1996/7/21 - XFree86 3.1.2Ec</A>
<LI><A HREF="#xterm_18">Patch #18 - 1996/7/18 - XFree86 3.1.2Ec</A>
<LI><A HREF="#xterm_17">Patch #17 - 1996/7/2 - XFree86 3.1.2Eb</A>
<LI><A HREF="#xterm_16">Patch #16 - 1996/6/25 - XFree86 3.1.2Ea</A>
<LI><A HREF="#xterm_15">Patch #15 - 1996/5/29 - XFree86 3.1.2E</A>
<LI><A HREF="#xterm_14">Patch #14 - 1996/5/12 - XFree86 3.1.2Dj</A>
<LI><A HREF="#xterm_13">Patch #13 - 1996/4/23 - XFree86 3.1.2Df</A>
<LI><A HREF="#xterm_12">Patch #12 - 1996/3/16 - XFree86 3.1.2Dc</A>
<LI><A HREF="#xterm_11">Patch #11 - 1996/3/5 - XFree86 3.1.2Db</A>
<LI><A HREF="#xterm_10">Patch #10 - 1996/2/14 - XFree86 3.1.2Cd</A>
<LI><A HREF="#xterm_09">Patch #9 - 1996/2/10 - XFree86 3.1.2Cb</A>
<LI><A HREF="#xterm_08">Patch #8 - 1996/2/9 - XFree86 3.1.2Cb</A>
<LI><A HREF="#xterm_07">Patch #7 - 1996/1/28 - XFree86 3.1.2n</A>
<LI><A HREF="#xterm_06">Patch #6 - 1996/1/8</A>
<LI><A HREF="#xterm_05">Patch #5 - 1996/1/7</A>
<LI><A HREF="#xterm_04">Patch #4 - 1996/1/7</A>
<LI><A HREF="#xterm_03">Patch #3 - 1996/1/7</A>
<LI><A HREF="#xterm_02">Patch #2 - 1996/1/7</A>
<LI><A HREF="#xterm_01">Patch #1 - 1996/1/6</A>
</UL>

<H1><A NAME="xterm_116">Patch #116 - 1999/9/25 - XFree86 3.9.16a</A></H1>
<ul>
	<li>modify warning if change-ownership of PTY fails; some
	  configurations may not happen to have old-style pty's (reported by
	  Bob Maynard).

	<li>improve check in configure script for group ownership of installed
	  xterm; some platforms use the -g option of ls to toggle group off
	  rather than on (reported by Greg Smith).

	<li>minor improvement to toolbar geometry, to make it not resizable. 
	  This still is not satisfactory (but is usable) since the toolbar
	  overlaps the xterm widget if the window is resized to make it
	  smaller.  It appears that some work is needed for the xterm widget's
	  geometry management to make it function properly.

	<li>implement configure script tests for utmp, tty group.

	<li>implement <em>-hold</em> option, allowing users to retain the
	  window after a shell has exited (this is recently an FAQ, but
	  prompted by a comment by Joachim Plaettner-Hochwarth
	  &lt;plaettner@aem.umn.edu&gt; in comp.unix.programmer, that the IRIX
	  winterm provides this option).

	<li>integrated change by Steve Wall to
	  add support for DEC Locator control sequences for xterm: 
	  <pre>
 
		DECEFR - Enable Filter Rectangle 
		DECELR - Enable Locator Reports 
		DECSLE - Select Locator Events 
		DECRQLP - Request Locator Position 
	  </pre>  
	  This allows the xterm mouse to be used with applications that use the 
	  DEC Locator sequences, such as VAX Tpu, or SMG$ based applications. 

	<li>patch from Matthias Baake &lt;Matthias.Baake@gmx.de&gt;, for print
	  action.  From his notes:
	  <ul>
	    <li>Bug 1: 
	      Underlined text is preceded by ESC [0;2m . This should be ESC [0;4m , ESC 
	      [2m doesn't seem to have any effect. (print.c/send_SGR) 
	 
	    <li>Bug 2: 
	      The check for the last non-empty column (while (last &gt; 0) ... in 
	      print.c/printLine) omits the rightmost column of the screen, the loop must 
	      start with last = screen->max_col+1 instead of last = screen->max_col. 
	 
	    <li>Bug 3: 
	      Any attributes of the first character (and of all immediately following 
	      characters with the same attributes) are ignored. The variable attr 
	      (print.c/printLine) should be initialized with 0, not with *a &amp; SGR_MASK. 
	  </ul>
</ul>

<H1><A NAME="xterm_115">Patch #115 - 1999/9/18 - XFree86 3.9.16a</A></H1>
<ul>
	<li>integrated changes by Steve Wall to implement an 88-color model
	  for systems where 256-colors cannot be allocated.

	<li>when 256-color configuration is compiled, colored bold and
	  underlining is not available; ifdef'd to avoid possible odd effects
	  in this case (reported by Steve Wall).

	<li>add resource <em>cacheDoublesize</em>, to limit the caching of font
	  information for double-sized characters.  This addresses a problem
	  reported by Aryeh Koenigsberg for X terminals with limited font
	  memory.

	<li>modify treatment of line-drawing characters in UTF-8 mode so that
	  the Unicode values are used rather than the C0 codes for storing the
	  translated characters (request by Markus Kuhn).
</ul>

<H1><A NAME="xterm_114">Patch #114 - 1999/9/15 - XFree86 3.9.16</A></H1>
<ul>

	<li>add configure script checks for Athena headers and libraries under
	  /usr/contrib to work on HPUX (reported by several people:
		David Nixon &lt;djn@csc.liv.ac.uk&gt; 
		Aryeh Koenigsberg &lt;aryeh.koenigsberg@telrad.co.il&gt; 
		Johannes M&#x00E4;hner &lt;johanm@camline.com&gt; 
		Andrew Gaylard &lt;andrew.gaylard@bsw.co.za&gt;).

	<li>add check to configure script if xterm is installed setgid rather
	  than setuid, since wtmp and utmp may be installed with group-writable
	  permissions other than root (based on Debian bug report #7112 by Bo
	  Branten &lt;bosse@ing.umu.se&gt;).

	<li>rewrote logic that removes data from termcap entry, e.g., for
	  titeInhibit, to make it less likely to remove the wrong data.

	<li>correct logic which checks for missing characters used for line
	  drawing.  The 0 character was tested unnecessarily, leading to
	  some inefficiency when rendering.

	<li>change termcap capability which is used as input or output of
	  ptyInitialErase logic from <em>kD</em> to <em>kb</em>.
	  Christian Weisgerber &lt;naddy@mips.rhein-neckar.de&gt; pointed out
	  in effect that <em>kD</em> (in terminfo <em>kdch1</em>) should
	  correspond to the control sequence for <em>dch1</em>, which deletes
	  from the current position toward the right.

	<li>check for failure to change ownership of the PTY device and warn
	  when xterm is running setuid'd to root.  This was reported to happen
	  on the FreeBSD/NetBSD/OpenBSD systems as a result of the chflags()
	  call.

	<li>add xterm-noapp terminfo entry to illustate a nominally
	  bash-compatible terminal description.
</ul>

<H1><A NAME="xterm_113">Patch #113 - 1999/8/15 - XFree86 3.9.15b</A></H1>
Several fixes.  The main one is a first draft of pulldown menus.  It's not
complete (I have some minor/annoying geometry problems to correct), but is
usable.  Once it's complete I plan to add a menu to support additional
selections that won't fit on the current popup menus.  Also, this fits into my
longterm plan to allow configuring with Motif libraries.

<ul>
	<li>correct error in input conversion for NRC mode (reported by
	  Stefan Traby &lt;stefan@sime.com&gt;).

	<li>fix initialization of num_lock data in Misc struct (since those
	  fields of the reference widget aren't initialized), and add logic to
	  deal with XVision whose NumLock key does not transmit but does alter
	  keypad state.

	<li>correct a missing return-value in get_pty(), for SCO

	<li>add E2A fix for backspace (Greg Smith), i.e.,<br>
	  #define VAL_INITIAL_ERASE A2E(127)

	<li>correct foreground color within cursor outline when the
	  window is unfocused (reported by Stephane Chazelas).

	<li>corrected position of scrollbar set in ResizeScrollBar(), which
	  left it positioned incorrectly if the right scrollbar were enabled
	  from the popup menu but was not initially enabled.

	  <p>
	  I have noticed some additional problems with right-scrollbar on
	  X11R5 which I will correct later.

	<li>integrate changes by Jean-Claude Michot for QNX from XFree86 3.3.4c

	<li>add resources menuBar/MenuBar, menuHeight/MenuHeight for later
	  use in toolbar geometry.

	<li>add configure option --enable-toolbar

	<li>add missing definition to make ziconbeep logic not compile-in when
	  configure script disables it.

	<li>add configure-check for input-method support in X libraries
</ul>

<H1><A NAME="xterm_112">Patch #112 - 1999/7/17 - XFree86 3.9Pw</A></H1>
<ul>
	<li>add null-pointer check to FlushLog(), fixes a core dump when both
	  -l and -lf options are used when xterm is configured with wide-character
	  support.

	<li>remove "ISO" case for SD, which was due to a typographical error in
	  ECMA-48 (reported by Paul Williams &lt;paul@celigne.co.uk&gt; for
	  vttest).

	<li>add "FILES" section to manpage.

	<li>generate header file to initialize default resources for colors
	  16-255.

	<li>patches by Greg Smith for os390:
	<ul>
	  <li>add README.os390

	  <li>use the pty_search() function to find an available pty/tty pair.

	  <li>move E2A() call out of getXtermCell() to SaveText() function
	      so it will be available in all configurations.
	</ul>

	<li>patches by Todd Larason:
	<ul>
	  <li>enable SGR 48 5 in ISO color mode, not just 256 color mode

	  <li>change configure's --disable-256-color option to
	    --enable-256-color, to match its effect

	  <li>fix OSC 4 xx ?  (report ansi color) to report a string which can
	    actually be used to set the color back

	  <li>fix OSC 4 xx yy (change ansi color) to not allow setting colors >
	    15 in 16 color mode

	  <li>simplify the COLOR_ settings a bit in ptyx.h, along with setting
	    NUM_ANSI_COLORS needed for #1 and #4 above

	  <li>correct string-terminator code passed for reference to OSC
	    responses; when in 7-bit mode, only the final byte of ST was seen.

	  <li>Allow multiple color #;name pairs in OSC 4,
	    and document changes to match. 
	</ul>
</ul>

<H1><A NAME="xterm_111">Patch #111 - 1999/7/10 - XFree86 3.9Pw</A></H1>
<ul>
	<li>add control sequences for specifying the RGB value of the ANSI
	  colors, and for configuring with 256 colors (patch by Todd Larason
	  &lt;jtl@molehill.org&gt;).  I made the default configuration to
	  16-colors, because xterm uses the default color map (which has only
	  256 colors).

	<li>correct an error in DCS $ q m reporting for colors 8-15 (Todd
	  Larason).

	<li>add test/demo script for double size characters.  Used this to
	  test/correct display of double size characters that should wrap,
	  underlined double size characters.

	<li>increased cache size for double size fonts to 8, to allow for both
	  normal and bold fonts (from discussion with Aryeh Koenigsberg
	  &lt;aryeh.koenigsberg@telrad.co.il&gt;).

	<li>integrated patch from Greg Smith &lt;rys@epaibm.rtpnc.epa.gov&gt;
	  for port to OS390 (aka MVS).  OS390 uses EBCDIC rather than ASCII.

	<li>correct an off-by-one in binary search limits in keysym2ucs.c (Markus
	  Kuhn).

	<li>implement logging for UTF-8 mode.  The output is written in UTF-8 form.
</ul>

<H1><A NAME="xterm_110">Patch #110 - 1999/6/29 - XFree86 3.9Pu</A></H1>
<ul>
	<li>If colorMode is enabled by default, compile-in default resources to
	  match the colors listed in XTerm-col.ad (this should fix a
	  longstanding FAQ).

	<li>added new OSC&nbsp;3&nbsp;;&nbsp;PROPNAME=VALUE&nbsp;ST escape
	  sequence to set an arbitrary X property on the top level xterm X11
	  window.  Omit "=VALUE" to delete the X property (patch by Greg Badros
	  &lt;gjb@cs.washington.edu&gt;).

	<li>change internal flag used for <em>utf8controls</em> resource
	  so we allow 31-bit range of characters (suggested by Thomas Wolff).

	<li>add check for 16-bit characters in OSC strings, change them to '?'
	  (reported by Thomas Wolff).

	<li>modify logic of same_font_name() to avoid trying to interpret both
	  parameters as wildcard patterns.  That does not (cannot) work, and in
	  some instances the font server will return unresolved wildcards for
	  the normal or bold fontnames, making them match inadvertently,
	  triggering the fallback overstrike logic (reported by Tim Adye).
</ul>

<H1><A NAME="xterm_109">Patch #109 - 1999/6/23 - XFree86 3.9Pt</A></H1>
<ul>
	<li>correct range-check from patch #108, which resulted in not being
	  able to select from the scrollback buffer (reported by Tim Adye
	  &lt;T.J.Adye@rl.ac.uk&gt;)

	<li>correct "no available ptys" problem with Cygwin B20.1 (patch by Tim
	  Adye).

	<li>modified install-ti rule in Makefile.in to allow override of the
	  terminfo directory when doing a "make install", i.e., by assigning
	  to TERMINFO_DIR (request by Zdenek Sekera &lt;zs@sgi.com&gt;).

	<li>added install-full rule to Makefile.in

	<li>resync mkdirs.sh and install.sh scripts against current autoconf

	<li>implement $(DESTDIR) in Makefile.in, making it simple to install
	  xterm and associated files into a directory just for packaging a
	  binary release (suggested by CaT &lt;cat@zip.com.au&gt;).

	<li>change IChar type to unsigned, rather than unsigned short, making
	  room for a flag to keep with 16-bit characters to prevent them from
	  being interpreted as C0 or C1 controls (reported by Thomas Wolff).

	<li>correct a typo from patch #107, incorrect array name, in the
	  filterUTF8 function (patch by Bruno Haible &lt;haible@ilog.fr&gt;)

	<li>add <em>utf8controls</em> resource to specify whether xterm should
	  interpret 16-bit characters unpacked from UTF-8 form as control
	  characters if they happen to fall into that range.  This behavior
	  is left unspecified by the Unicode standard (request by Thomas Wolff).

	<li>modify handling of OSC to recover if application sends 16-bit
	  characters with codes above 255.  We cannot display them as is, but
	  translate out-of-range characters to a '?' (reported by Thomas
	  Wolff).
</ul>

<H1><A NAME="xterm_108">Patch #108 - 1999/6/19 - XFree86 3.9Ps</A></H1>
<ul>
	<li>add a range-check to LastTextCol(), to guard against indexing
	  before the beginning of the scrollback buffer.  This appears to
	  happen with certain fonts under X11R5 (reported by Stephane Chazelas
	  &lt;Stephane_Chazelas@Raytheon.com&gt;).

	<li>implement resource <em>boldMode</em>, to allow disabling the
	  simulation of bold fonts when the bold and normal fonts are not
	  different (requested by Will Day &lt;willday@rom.oit.gatech.edu&gt;).

	<li>change the atom "UTF-8" to "UTF8_STRING", and fixes a few bugs in
	  the UTF-8 selection (patch by Juliusz Chroboczek).

	<li>correct logic of binary-search in keysym2ucs.c (patch by Markus
	  Kuhn).

	<li>add special interpretation of keysym codes above 0x1000000 as
	  the corresponding UCS value plus 0x1000000 (patch by Markus Kuhn).
</ul>

<H1><A NAME="xterm_107">Patch #107 - 1999/6/12 - XFree86 3.9Pq</A></H1>
<ul>
	<li>Two changes from Stephen P Wall &lt;steve_wall@redcom.com&gt;.
	  From his description:
	<blockquote>
	The first change is simple - I added ESC[3J to erase the stored lines
	above the screen.  That's what the changes to util.c and ctlseqs.ms
	are.
	<p>
	The second change is to get the blinking cursor working.  I took out
	the cursorBlinkTime resource, and put in cursorBlink (Boolean),
	cursorOnTime (time cursor is on in msecs) and cursorOffTime, and added
	a cursorblink item to the vtMenu to enable/disable it.
	</blockquote>

	<li>Integrated a patch from Juliusz Chroboczek &lt;jec@dcs.ed.ac.uk&gt;.
	  From his description:
	<blockquote>
	With this patch, selection conversion works properly:
<pre>
	ISO 8859-1 xterm -&gt; ISO 8859-1 xterm (transferred as STRING);
	ISO 8859-1 xterm -&gt; UTF-8 xterm (transferred as STRING);
	UTF-8 xterm -&gt; ISO 8859-1 xterm (transferred as STRING);
	UTF-8 xterm -&gt; UTF-8 xterm (transferred as UTF-8).
</pre>
	It will not work properly if one xterm is in, say, ISO 8859-2.
	Actually, for this case xterm breaks the ICCCM routinely (sending ISO
	8859-2 data as STRING), so I wouldn't worry too much about it.  I have
	not changed the behaviour in eight-bit mode in any way.
	</blockquote>
</ul>

<H1><A NAME="xterm_106">Patch #106 - 1999/6/9 - XFree86 3.9Pq</A></H1>
<ul>
	<li>remove duplicate fix for OpenBSD in resize.c

	<li>correct logic in ScreenWrite, which did not reset the high bytes
	  of 16-bit characters when overwriting them with a 8-bit character
	  string (reported by Thomas Wolff).

	<li>integrate patch by Markus Kuhn to provide limited support for
	  input of UTF-8 16-bit data by a lookup table.

	<li>correct check in non_blank_line to ensure we're in wide-character
	  mode before looking at the high bytes, for InsertChar.
</ul>
<H1><A NAME="xterm_105">Patch #105 - 1999/6/5 - XFree86 3.9Pp</A></H1>
<ul>
	<li>implement new resource <em>trimSelection</em>, which allows xterm
	  to trim trailing blanks from selected lines.  This does not affect
	  the highlighting. (reported by several people using <em>mutt</em>,
	  including
	  Hans Morten Kind &lt;edphk@uib.no&gt;,
	  Jeremy &lt;jeremy@exit109.com&gt;
	  and (Michael Fuller &lt;msf@mds.rmit.edu.au&gt;).

	<li>add patch by Matthieu Herrb to include term.h in resize for OpenBSD.

	<li>correct logic for UTF-8 in functions that hide and show the cursor;
	  it was displaying a space whenever the low byte of the character at
	  the cursor position was zero (reported by Thomas Wolff
	  &lt;Thomas.Wolff@icn.siemens.de&gt;).
</ul>

<H1><A NAME="xterm_104">Patch #104 - 1999/5/30 - XFree86 3.9Pn</A></H1>
This is a resync patch against XFree86 3.9Pn, reflecting changes which were
submitted by Branden Robinson, who worked with
Wichert Akkerman &lt;wichert@cs.leidenuniv.nl&gt;
to set up ifdef's to handle GNU libc 2.1,
and use getpt() which lets xterm avoid having to know the actual PTY name.
<p>
I have also added a few fixes for signed/unsigned mismatches, and corrected
a problem in the configure script (the UTF-8 code was always configured since
the Imakefile defines this).

<H1><A NAME="xterm_103">Patch #103 - 1999/5/14 - XFree86 3.9Pm</A></H1>
<ul>
	<li>correct selection logic: I omitted an offset that accounts for
	  the distance into the scrollback buffer when rewriting this for
	  patch #101.  Also fixed a similar problem for selecting double
	  size characters from the scrollback buffer (first was reported
	  by D Roland Walker &lt;walker@pobox.com&gt;).

	<li>improved support for Unix98 PTY's, using patch in Debian bug report
	  #35650, by J.H.M. Dassen &lt;jdassen@wi.leidenuniv.nl&gt;. From
	  the patch description:
	<blockquote>
	<ul>
	<li>No longer links xterm against libutil on a glibc2.1 system.
	  libutil is a compatibility library and should only be used when
	  necessary.  Rather than having get_pty() use openpty() from this
	  compatibility library, use the real UNIX98 pty support in get_pty()
	  (open()ing the master pty, through getpt() if available (glibc
	  extension)).  Use openpty() only under glibc2.0.
	<li>GNU libc2 is not Linux-specific; already it runs on the Hurd.  It
	  provides the UNIX98 pty functions (plus the getpt() extension),
	  regardless of the underlying OS.  Changed two constructs to look for
	  GNU libc2 only, not GNU libc2 on Linux.
	</ul>
	</blockquote>

	<li>improve font configuration, by checking if the user's resource
	 settings for normal and bold fonts give the same font sizes
	 (fixes problem reported by Peter Waltenberg &lt;peterw@dascom.com&gt;).
</ul>

<H1><A NAME="xterm_102">Patch #102 - 1999/5/12 - XFree86 3.9Pm</A></H1>
<ul>
	<li>revert change to openpty call in patch #101; this causes xterm to
	  fail on DEC-Alpha OSF/1 4.0B (reported by H Merijn Brand).

	<li>modify print.c to move include of stdio.h after the autoconf'd
	  xtermcfg.h since HP's ANSI C compiler otherwise sees inconsistent
	  prototype for getopt, probably due to problem with const (reported by
	  H Merijn Brand).
</ul>

<H1><A NAME="xterm_101">Patch #101 - 1999/5/10 - XFree86 3.9Pm</A></H1>
<ul>
	<li>moved includes and definitions for 'select' from data.h to xterm.h
	  to fix problem introduced by prototype for getPtyData, part of UTF-8
	  changes (reported by Jens Schleusener &lt;Jens.Schleusener@dlr.de&gt;)

	<li>added "Meta &lt;Btn2Down&gt;:clear-saved-lines()" default
	  translation (patch by H Merijn Brand)

	<li>fixes to configure script and ifdef's in main.c to build on a
	  HP9000/D390 (hppa-2.0w) running HP-UX 11.00 (64 bit) with egcs 1.1.2
	  and HP's ANSI C compiler (patch by H Merijn Brand
	  &lt;PROCURA_BV@CompuServe.com&gt;)

	<li>add more parentheses in ifdef's (patch by Bob Maynard).

	<li>eliminate conflicting definitions for USE_TERMINFO in resize.c
	  (reported by Jeremy Buhler).

	<li>change openpty call to pass NULL rather than ttydev parameter,
	  since that was used only to estimate the length of the
	  corresponding data, and may not really be long enough
	  (reported by Andreas Jaeger)

	<li>update description in xterm manpage for character class table,
	  which said it handles only 7-bit codes.

	<li>correct a typo in ScrnDeleteChar() which made it not clear the
	  high byte of wide-character data.

	<li>add logic to convert selection to UTF-8 form when appropriate.
	  This makes select/paste "work", but further work is needed to
	  make UTF-8 recognized as a locale in Xlib.

	<li>correct right-limit check when selecting double-width characters.

	<li>change default answerback response to an empty string.
</ul>

<H1><A NAME="xterm_100">Patch #100 - 1999/5/3 - XFree86 3.9Pl</A></H1>
<ul>
	<li>Correct a typo in the default resource value for
	  backarrowKeyIsErase:  it was always true (reported by Bram
	  Moolenaar).

	<li>improve configure script's test if the installed xterm is setuid,
	  in case that is a symbolic link.

	<li>correct "install-ti" rule in Makefile.in, by not setting a blank
	  $TERMINFO value.  That is interpreted as "." by ncurses' tic.
</ul>

<H1><A NAME="xterm_99">Patch #99 - 1999/5/2 - XFree86 3.9Pk</A></H1>
<ul>
	<li>correct logic that computes num_ptrs count of the number of indices
	  into the screen buffer.  This is the maximum of the colors and
	  character-set indices; was incorrect in patch #97.

	<li>correct argument type for sigsetjmp, incidental change in patch
	  #96's Unix88 PTY patch (reported by Bram Moolenaar).

	<li>correct description of secondary DA in ctlseqs.ms (reported by Bram
	  Moolenaar).

	<li>decouple the backarrowKey and ptyInitialErase resources by
	  adding a new resource backarrowKeyIsErase, to accommodate people
	  using applications which have hardcoded tests for characters 8 and
	  127 rather than relying on the stty settings.

	<li>modify the UTF-8 decoder so that all possible illegal UTF-8
	  sequences are properly represented by U+FFFD.  This should be very
	  helpful for developers of code that output UTF-8 strings for
	  debugging.  See the file utf-8-test.txt in
	  http://www.cl.cam.ac.uk/~mgk25/download/ucs-fonts.tar.gz for a
	  demonstration text that contains numerous illegal UTF-8 values.
	  (patch by Markus Kuhn).

	<li>correct a place in ScrnRefresh where I was filling the high byte of
	  a wide character with a space rather than a null (reported by Markus
	  Kuhn).
</ul>

<H1><A NAME="xterm_98">Patch #98 - 1999/4/26 - XFree86 3.9Pk</A></H1>
<ul>
	<li>correct data manipulation in unparseputc(), broken for
	  little-endian machines by patch #97's UTF-8 changes.  This meant that
	  keyboard input on SunOS did not work, though Linux i386 was fine.

	<li>modify initialization for backarrowKey and logic for initial-erase
	  to prevent the initial-erase from overriding an explicitly set
	  backarrowKey resource (reported by Vikas Agnihotri).

	<li>add a missing null-pointer check in ScrnRefresh, for the
	  wide-characters configuration.
</ul>

<H1><A NAME="xterm_97">Patch #97 - 1999/4/25 - XFree86 3.9Pk</A></H1>
<ul>
	<li>add configure script test for -lutil, needed for openpty call when
	  configuring xterm for Glibc-2.1 and Unix98 PTY's (first reported by
	  Martin Lorentz" &lt;m.lorentz@w12.link-goe.de&gt;).

	<li>completely parenthesize ifdef expressions for Glibc (suggested by
	  Bob Maynard).

	<li>add initial-erase options (-ie, +ie) to help message (reported by
	  Vikas Agnihotri).

	<li>remove duplicate definition of USE_USG_PTYS (reported by Jeremy
	  Buhler).

	<li>change termcap <em>kD</em> and terminfo <em>kdch1</em> to a DEL
	  (\177).
	  I overlooked this when separating the styles of keyboard with
	  the <em>sunKeyboard</em> resources in patch #94, so that it normally
	  matches the value of the stty erase character:
	  <ul>
	  <li>Reported by Jae Gangemi &lt;jgangemi@ccf.rutgers.edu&gt;,
	    this caused emacs to not process the DEL properly, combining it
	    with succeeding characters.
	  <li>This does not appear to be related to a problem which I have
	    found with <em>screen</em>, which translates the stty erase into
	    the termcap <em>kD</em> or terminfo <em>kdch1</em> value
	    (depending on how it is linked)
	    if the $TERMCAP variable is set when <em>screen</em> is invoked.
	  </ul>

	<li>add command-line options for enabling UTF-8 mode: -u8 and +u8.
	  The more obvious -utf8 and +utf8 would conflict with xterm's
	  -ut and +ut (utmp) options.

	  The UTF-8 changes were requested by Markus Kuhn
	  &lt;Markus.Kuhn@cl.cam.ac.uk&gt;.  This patch does not complete UTF-8
	  implementation, but makes it usable, i.e., display and refresh work,
	  and I am able to display the test cases which Markus provides.
	  More work is needed to complete this feature:
	  <ul>
	  <li>the control sequences for switching in/out of UTF-8 mode are
	    partly implemented (don't use them).  Similarly, the switching
	    between vt100 and tek4014 emulations when UTF-8 mode is enabled
	    will not work properly.
	    <p>
	    You must use the -u8 command line option
	    to use this feature, as well as compile with the OPT_WIDE_CHARS
	    definition.
	  <li>cut/paste only copies 8-bit characters.
	  <li>logging is disabled in the wide-character configuration
	  <li>printing only writes 8-bit characters.
	  <li>input only does 8-bit characters.  This is the area that I know
	    least about.
	  </ul>
</ul>

<H1><A NAME="xterm_96">Patch #96 - 1999/4/19 - XFree86 3.9Pj</A></H1>
<ul>
	<li>modify Makefile.in to work with configure script's --srcdir option.
	  (patch by Jeremy Buhler &lt;jbuhler@cs.washington.edu&gt;)

	<li>add checks for 'echo -n' equivalent for 8colors.sh and 16colors.sh
	  scripts (reported by Vikas Agnihotri).

	<li>improve logic that looks for bold fonts to allow for wildcards
	  in the specification for normal fonts, and to ensure that if
	  a bold font is specified as normal, that xterm will simulate a
	  bold version of that using a one-pixel offset overstrike
	  (reported by Henrik Harmsen &lt;harmsen@erv.ericsson.se&gt;).

	<li>correct horizontal spacing of double width line-drawing characters
	  that xterm simulates.

	<li>improve support for Unix98 PTY's, using patch in Debian bug report
	  #35650, by Topi Miettinen &lt;Topi.Miettinen@medialab.sonera.fi&gt;.
	  Andreas Jaeger says this also corrects a permissions problem
	  reported by cat@zip.net.au

	<li>modify initial-erase logic to ensure that <code>ttyModes</code>
	  resource overrides it.
</ul>

<H1><A NAME="xterm_95">Patch #95 - 1999/4/5 - XFree86 3.9Ph</A></H1>
<ul>
	<li>modify primary DA response to allow a '1' parameter.

	<li>add printer and national replacement character sets to VT220
	  primary DA response.

	<li>document primary and secondary DA responses in ctlseqs.ms

	<li>use the patch number (e.g., 95) in the secondary DA response,
	  providing user applications a means of determining the version
	  of xterm for feature comparison (request by Bram Moolenaar).

	<li>make xterm respond to secondary DA when the decTerminalId
	  is set for VT100.

	<li>limit user-defined keys (DECUDK) to VT220-style keyboard
	  when sunKeyBoard resource is true.

	<li>modify ifdef's for Linux-2.2.x with Glibc-2.1 to work with
	  Glibc-2.1 and no Unix98 PTY support (patch from From Andreas Jaeger
	  &lt;aj@arthur.rhein-neckar.de&gt;)

	<li>add optional feature (resource and command-line options) to make
	  xterm use the PTY's sense of erase character on startup, rather than
	  requiring it to be \177, or set the PTY's erase character to match
	  xterm's configuration.  Note that while $TERMCAP is modified to
	  reflect the actual configuration, the terminfo kdch1 string is not
	  (request by Dirk H Hohndel &lt;hohndel@suse.de&gt;)

	<li>improve scripts in vttest to work with newer shells that do not
	  use 'echo -n'.

	<li>add fonts.sh example script

	<li>correct inequality in handling of "#1" font specification.

	<li>correct call to XGetWMNormalHints() used for computing maximum
	  screen size; the size hints may not have been set.

	<li>begin implementation of support for wide-characters (configure
	  option --enable-wide-chars defines OPT_WIDE_CHARS, invoke xterm with
	  -wc option to activate this feature).  This patch optionally widens
	  internal data structures, invokes the 16-bit text output rather than
	  the 8-bit version and adds some tables.

</ul>
<H1><A NAME="xterm_94">Patch #94 - 1999/3/27 - XFree86 3.9Pf</A></H1>
<ul>
	<li>further fixes for terminfo: ka1, ka3, etc., differ between the
	  default xterm-xfree86 and xterm-vt220 entries.

	<li>change default (with sunKeyboard resource false) behavior of
	  the editing keypad "Delete" to send a 127, like xterm-r6.
	  The VT220-style <code>&lt;esc&gt;[3~</code> is sent when
	  sunKeyboard is true (reported by Tomas Vanhala).

	<li>add parameters to function keys to indicate if shift, control
	  or alt are set.  The codes are based on a description of
	  a DEC VT510 with a PC keyboard, from Jeffrey Altman
	  &lt;jaltman@watsun.cc.columbia.edu&gt;.

	<li>add control sequence 1035, set-num-lock action and num-lock
	  menu entry to control the use of the NumLock and Alt keys for
	  the Sun/PC and VT220 keyboard extensions.

  	<li>implement DECSET/DECRST numeric keypad (DECNKM) mode.

	<li>modify terminfo and termcap to use recommended "X Window" or "X11"
	  names rather than "X Windows" (reported by Tomas Vanhala).

	<li>suppress translation of shifted keypad "+" when sunKeyboard
	  is true.

	<li>workaround unexpected behavior (perhaps bug) in XmbLookupString,
	  which returns trash in the string buffer for numlock and control-key
	  combined with keypad-keys.

	<li>modify ScrollBarReverseVideo() to keep scrollbar border visible
	  when reverse video is toggled.

	<li>correct missing case for parameter 17 (set highlight color) in
	  dynamic colors control sequences.

	<li>extend dynamic colors control sequences to allow users to
	  determine the colors and font which are currently active.

	<li>minor tweak to OSC responses, to use BEL if the application used
	  that to end the request, rather than ST.  This works better with
	  shell scripts, which may not handle an
	  <code>&lt;esc&gt;backslash</code> very well.

	<li>separate menu settings for reverse video from that done under
	  program control.

	<li>corrected ifdef's for menus, which did not allow tek4014 to
	  be suppressed properly (reported by Clint Olsen).

	<li>integrated patch from Pavel Roskin
	  &lt;pavel_roskin@geocities.com&gt;
	  for Linux-2.2.x with GLibc-2.1 and
	  /dev/ptmx support:
	<ul>
	  <li>main.c and resize.c were using different rules to determine
	    whether ATT should be defined (actually USE_USG_PTYS is more
	    apt).

	  <li>copy definitions from main.c to resize.c to prevent
	    sys/stream.h and sys/ptem.h from inclusion when SYSV is not
	    defined

	  <li>define CNUL if not already defined like other variables.

	  <li>/dev/tty does exist in Linux, but it doesn't mean, it
	    should be used.  Therefore EACCES is now an acceptable
	    result.

	  <li>ifdef'd several calls such as <code>ioctl (ptyfd, I_PUSH,
	    "ptem")</code> to build on Linux (I_PUSH is not defined when
	    sys/stropts.h is not included).
	</ul>

	<li>initialize second "ltc" variable in main.c (reported by David
	  Dawes).

	<li>provide definition for USE_USG_PTYS in screen.c

	<li>add resource-files to install rule in standalone Makefile.in

	<li>add sample scripts to illustrate titlebar controls, resizing
	  and colors.
</ul>

<H1><A NAME="xterm_93">Patch #93 - 1999/3/14 - XFree86 3.9Pd</A></H1>
Here are several fixes and minor enhancements.  The chief ones
are the fixes for NumLock mode and reverse video, since we had become
used to working around the problems.
<ul>
	<li>remove kfnd/kll/kslt strings from terminfo, because curses
	  applications do not necessarily return khome/kend pairs
	  (reported by Vikas Agnihotri).

	<li>implement NumLock resource which overrides the keyboard tables for the
	  special case of keypad keys.  This is a problem introduced in xterm
	  by X11R6 changes, i.e., an ambiguity which in effect discarded vt100
	  keypad support.

	<li>modify Sun/PC keyboard mode to extend this (emulation of DEC vt100
	  keypad) to the remainder of the numeric keypad.  Now, the default
	  operating mode of xterm uses the keyboard tables as-is (except if
	  the NumLock mode overrides), but provides good vt100 keypad compatibility
	  if the Sun/PC keyboard menu item is checked.

	<li>separate command-line settings for reverse video from that done
	  under program control.  This is a problem which was introduced by
	  X11R6.  Though <em>correct</em>, most users are confused by allowing
	  the reset command to undo the effect of the command-line <kbd>-rv</kbd>
	  option.

	<li>add description of function keys, keypad and cursor keys to ctlseqs.ms

	<li>add terminfo entries for xterm-vt52, xterm-sun and xterm-hp

	<li>correct typo (missing case value) for DECSET 35, enable/disable
	  shifted keypad action and a few compiler warnings (reported by Zdenek
	  Sekera &lt;zs@sgi.com&gt;).

	<li>correct reporting of color values 8-15 in DECRQSS (reported by
	  Vikas Agnihotri).

	<li>modify parsing of ttyModes resource to recognize "^-" as "undef"
	  (requested by Tomas Vanhala).

	<li>integrate/extend changes to add iconify/maximize actions
	  (from Edward S. Arthur &lt;eda@ultranet.com&gt;).

	<li>add control sequences for maximizing/restoring window, and
	  for reporting maximum screen size.

	<li>add 'interpret' action, to support local function-key interpretation.
	  Used properly, this makes most of the specialized actions of xterm
	  redundant.

	<li>add control sequence private modes 1051, 1052 and 1052, for
	  setting the Sun and HP function key modes, and for setting the
	  Sun/PC keyboard mode.

	<li>add configure option --disable-maximize

	<li>add configure option --disable-num-lcok

	<li>extend descriptions of configure script options in INSTALL.
</ul>

<H1><A NAME="xterm_92">Patch #92 - 1999/2/5 - XFree86 3.9Nz</A></H1>
<ul>
	<li>increase buffer size for tgetent (i.e., termcap) to 1500.  This
	  fixes a problem where <em>screen</em> is built using ncurses or
	  GNU termcap and <em>xterm</em> is built using the standard termcap
	  interface.  The former does not limit the termcap size, while the
	  latter is assumed to be no longer than 1023 characters.  The
	  <em>screen</em> program's termcap entry is about 1200 characters
	  long.

	<li>change update_menu_item() to a function, to simplify debugging.
	  This also reduces the executable by 4Kb.

	<li>add control sequences for DECSET 30, 1010, 1011 like rxvt (enable
	  or disable some features that were only settable via resources or
	  command line arguments).

	<li>add control sequence for DECSET 35, which enables/disables the
	  shifted keypad functions.

	<li>add support for switching font sizes, by stepping through the
	  font menu using shifted keypad plus and minus.

	<li>correct missing initialization of tekInhibit and tekSmall resources.

	<li>correct ifdef's in charproc.c for XtNgeometry and XtCGeometry
	  (reported by Bram Moolenaar).
</ul>

<H1><A NAME="xterm_91">Patch #91 - 1999/1/21 - XFree86 3.9Nw</A></H1>
<ul>
	<li>Implement logic to translate input characters which are mapped
	  when in vt220 National Replacement Character mode (requested by
	  Tomas Vanhala).

	<li>Resync configure scripts with my patches to autoconf 2.13

	<li>Change order of -lXmu and -lXext to accommodate cygwin32
	  (reported by Vikas Agnihotri).

	<li>Add "-ti" option to set terminal emulation level from command
	  line rather than via resource.

	<li>Simplify some of the preprocessor logic using #elif.
</ul>

<H1><A NAME="xterm_90">Patch #90 - 1998/12/13 - XFree86 3.9Nq</A></H1>
This implements several small fixes and enhancements.  The chief one implements
fallback support for line drawing characters with fonts that do not include
those characters.  But I implemented that last.

<ul>
	<li>If any of the glyphs in positions 0-31 (used by xterm to implement
	  the VT100 alternate character set) are zero-sized (i.e., missing),
	  xterm will reserve a normal space for the glyph when drawing.  I
	  implemented a simple stroke-drawing function to draw the line-drawing
	  characters and a couple of the other (simpler) characters such as
	  diamond.  (This was suggested by Vikas Agnihotri).

	<li>Modify the computation of doublesize characters to work around font
	  servers which shift the scaled characters up/down or do not give the
	  correct width.

	<li>Add popup menu item and corresponding resource settings to disable
	  the font-scaling logic for doublesize characters to work around
	  (older) font servers which simply do not draw the fonts scaled to the
	  size that they said they would.  I see this problem on a SunOS system
	  running X11R5; the X11R6 servers seem well behaved.

	<li>Implement new escape sequence, private mode 1049, which combines
	  the switch to/from alternate screen mode with screen clearing and
	  cursor save/restore.  Unlike the existing escape sequence, this
	  clears the alternate screen when switching to it rather than when
	  switching to the normal screen, thus retaining the alternate screen
	  contents for select/paste operations.

	<p>When I implemented the popup menu entry to toggle between the normal
	  and alternate screens, I considered only pasting from the normal
	  screen to the alternate; this improvement allows either direction.

	<li>Changed the termcap and terminfo for xterm-xfree86 and xterm-8bit
	  to use the new 1049 private mode.

	<li>Modify the logic which switches between normal and alternate
	  screens so that the save/restore cursor operations apply only to the
	  current screen.  That means that applications which use the terminfo
	  smcur/rmcur or termcap ti/te capabilities will restore the cursor to
	  the original position on the normal screen rather than to the most
	  recent place where a save-cursor operation was performed.

	<p>I note that a real VT100 terminal would not behave in this way,
	  but it is a moot point since the VT100 does not implement alternate
	  screen, and therefore the save/restore cursor sequence would not be
	  used in this context.  I reviewed the logic which switches between
	  normal and alternate screens based on some recent newsgroup postings
	  as well as a proposed patch in the Debian group which attempts to
	  do this (the patch has a bug, however, so I did not use it).

	<li>Add popup menu entry for toggling the titeInhibit resource.

	<li>Add new resource answerbackString, which overrides the default
	  "xterm" returned by xterm when responding to an ENQ (control/E)
	  character (request by Rajesh Vaidheeswarran &lt;rv@fore.com&gt;).

	<li>Add new resource keyboardDialect for setting the NRC display
	  character set (request by Tomas Vanhala, who notes that I should
	  add logic to translate the keyboard as well).

	<li>Add new command-line option and corresponding resources for making
	  xterm generate escape sequences compatible with HP terminals.  Like
	  the existing Sun escape sequences, this is available as a popup menu
	  item.  It is enabled by the configure script with the option
	  --enable-hp-fkeys (requested by Toni Mueller &lt;sales@oeko.net&gt;).

	<li>Add configure script option --disable-boxchars to disable the
	  fallback support for line drawing characters.

	<li>Fix ifdef's for configure script --disable-ansi-color, and reviewed
	  all configure options to ensure that all can be enabled/disabled
	  appropriately.

	<li>Update config.guess and config.sub, from Lynx.
</ul>

<H1><A NAME="xterm_89">Patch #89 - 1998/11/20 - XFree86 3.9Nm</A></H1>
This patch completes the implementation of double-sized character support
for the VT100 emulation, and fixes a few minor bugs:

<ul>
<li>corrected the cursor position in HideCursor, which did not multiply
the column by two when in doublesize mode.
This bug, which did not appear in normal use,
dates back to my original <a href="#xterm_44">changes</a> to partly implement
double-sized characters.
I noticed it when cat'ing a typescript from vttest's double-sized character
test.
<li>ensure that the current line is repainted when switching between
single and double width characters.
<li>reduce the number of bits used for double-sized character coding
from 3 to 2, to make more room for soft-font codes.
<li>copy newer ifdef's from the XFree86 3.3.3 release's main.c,
which address details of glibc and powerpc.
<li>moved definition of DECL_ERRNO in xterm.h to match XFree86 3.3.3
<li>modify <em>resize</em> to remove the ifdef on SVr4 that suppressed
printing the script for $LINES and $COLUMNS.
Solaris' resize utility does this; suppressing the behavior is unnecessary.
</ul>
I tested the double-sized characters using vttest and the xfsft patch.
These fonts worked reasonably well:
<pre>
	-bitstream-courier-medium-r-normal--0-0-0-0-m-0-iso8859-1
	9x15
</pre>
The iso8859 font does not include box characters, of course, but looks good.

<H1><A NAME="xterm_88">Patch #88 - 1998/10/31 - XFree86 3.9Nk and 3.3.2h</A></H1>
This refines my #85 patch by checking for a case where the font server
returns a bold font that does not quite correspond to the normal font.
When I asked for a bold version of the 6x12 font, the font server
returned a near equivalent where the ascent and descent values did not
match, causing xterm to leave lines across the display.
This patch makes xterm reject that type of mismatch, falling back to the
old font behavior.

<H1><A NAME="xterm_87">Patch #87 - 1998/10/21 - XFree86 3.9Nj and 3.3.2f</A></H1>
This corrects a problem reported by Stefan Dalibor.  My table entries for the
<em>printerExtent</em> and <em>printerFormFeed</em> resources used the wrong
types for sizeof, causing the printer to not work properly on some platforms
because the <em>printAttributes</em> resource was overwritten (e.g., Digital Unix with DEC Alpha).
<p>
I reviewed all of the resource table entries and fixed a potential problem with
<em>resizeGravity</em>, which was typed as <em>int</em> rather than
<em>XtGravity</em>.

<H1><A NAME="xterm_86">Patch #86 - 1998/10/14 - XFree86 3.9Nj and 3.3.2e</A></H1>
A small fix: when switching to/from the continuous mouse reporting mode,
the event mask was incorrect if xterm was built under X11R5 because the
original data was saved under an ifdef for active-icon.

<H1><A NAME="xterm_85">Patch #85 - 1998/10/12 - XFree86 3.9Nj and 3.3.2e</A></H1>
Some cleanup (I noticed the pixel droppings a few months ago after getting a
new 17" monitor):
<ul>
	<li>split-out the functions that load/reload fonts for xterm as new
	  file fontutils.c to extend them to support automatic loading of
	  bold font corresponding to the normal font.  Adapted logic from
	  EMU 1.3 for this purpose.  This fixes most occurrences of pixel
	  droppings from bold characters.

	<li>modified by renaming variables and adding casts to permit compile
	  with g++.

	<li>modify headers so they can all be compiled without order
	  dependencies, and use bracketed rather than quoting includes to allow
	  compile from separate directory.

	<li>renamed xtermm terminfo entry to xterm-mono, to avoid conflict with
	  Solaris entry now in ncurses.
</ul>

<H1><A NAME="xterm_84">Patch #84 - 1998/10/9 - XFree86 3.9Ni</A> and 3.3.2e</H1>
Several small fixes and enhancements, including a patch from
Bjorn Helgaas:
<ul>
	<li>correct initialization of TERMCAP environment variable, which
	  was frequently set to garbage on non-Linux systems because
	  "termcap" and "newtc" contained random data from the stack.

	<li>remove the LINEWRAPPED attribute from lines as they are cleared.
	  Previously, the attribute was set but never cleared.

	<li>make word and line selections work even when lines are wrapped
	  by xterm.  Previously, selections were limited to one screen line.
</ul>
as well as
<ul>
	<li>modify logic for line-wrapping to reset the associated flag if
	  the application deletes a character. This fixes a problem reported
	  by Bjorn Helgaas where word/line selection would still wrap even
	  after deleting characters from the first line.
	<li>add kll/kH capabilities to xterm-xfree86 entries in termcap and
	  terminfo (request by Michael Schroeder).
	<li>shorten descriptions in termcap to make resolved entries all
	  shorter than 1023 character limit.
	<li>use DECSTR control sequence to shorten initialization and reset
	  strings in xterm-xfree86 termcap and terminfo.
	<li>use rmul/smul and rmir/smir in xterm-r5 terminfo to match termcap.
	<li>correct typos in initialization and reset strings in xterm-r5
	  termcap and terminfo.
	<li>disable special translations of key symbols (the backarrow key,
	  the editing keypad and the keypad "+") when a modifier other than
	  shift, control or numlock is used.  This makes xterm handle the meta
	  key as expected by people using emacs (reported by Pete Harlan
	  &lt;harlan@pointofchoice.com&gt; in linux.debian.user newsgroup).
</ul>

<H1><A NAME="sync_83">Resync #83 - 1998/10/7 - XFree86 3.3.2e</A></H1>

Merge changes through patch #83 with the 3.3.2e version.  This follows a
patch by Matthieu Herrb &lt;matthieu@laas.fr&gt; to add checks for non-null
return from malloc.

<H1><A NAME="xterm_83">Patch #83 - 1998/8/25 - XFree86 3.9Nb</A></H1>
Several small fixes and enhancements:
<ul>
	<li>add configure test to infer if xterm should be installed setuid
	  based on previously installed xterm (reported by Stephen Marley
	  and Stefan Dalibor).

	<li>integrate/extend patch by Jason Bacon to implement quasi-continuous
	  mouse reporting.

	<li>correct control sequences transmitted by function keys F1 to F4
	  when sunFunctionKeys resource is true (it was still using the
	  VT100 control sequences).

	<li>modify handling of backarrow key so that the control modifier
	  toggles the backspace/delete interpretation set by the
	  backarrowKey resource.

	<li>limit the row and column values used to report mouse position.
</ul>

From resync with XFree86 3.9Nb:
<ul>
	<li>add support for the VSTATUS control character (patch by
	  Robert Earl &lt;rearl@teleport.com&gt;).
</ul>

<H1><A NAME="xterm_82">Patch #82 - 1998/7/15 - XFree86 3.9Aj</A></H1>
Bug fix for patch #81:
<ul>
	<li>remove an #undef for NBBY, which caused compile problem on FreeBSD
	  (reported by David Dawes).
</ul>

<H1><A NAME="xterm_81">Patch #81 - 1998/7/14 - XFree86 3.9Aj</A></H1>
More bug fixes:
<ul>
	<li>fix conflicting ifdef's for TIOCSLTC when building with Linux on
	  AXP aka DEC Alpha (reported by Robin Cutshaw).

	<li>correction to patch #79, move assignment for *utptr-&gt;ut_user = 0;
	  back into non-SVR4 ifdef in main.c, since this clobbers username on
	  Solaris 2.5.1 (analysis by Will Day
	  &lt;willday@rom.oit.gatech.edu&gt;).

	<li>corrected khome/kend in xterm-8bit terminfo description.

	<li>improve cursor color by making it always the reverse of fg/bg
	  unless the cursorColor resource is set, i.e., to something other than
	  the default foreground (reported by Vikas Agnihotri and Bram
	  Moolenaar).

	<li>minor fixes for compiler warnings, including a syntax error in
	  the AMOEBA ifdef's.
</ul>
From resync with XFree86 3.9Aj:
<ul>
	<li>correction to patch #73, supply missing #else for fallback definitions
	  of size_t, time_t (Robin Cutshaw &lt;robin@intercore.com&gt;).
</ul>

<H1><A NAME="xterm_80">Patch #80 - 1998/6/29 - XFree86 3.9Ai</A></H1>
This fixes a couple of items leftover or introduced by patch 79:
<ul>
	<li>take out the logic that suppresses editing-keypad in vt100 mode
	  (those keys are too valuable to give up for a fine point of
	  emulation).

	<li>corrected a couple of places in terminfo where I missed using the
	  vt220-style editing-keypad codes for Find/Select (mapped to Home/End).

	<li>checked termcap file against terminfo, fix several places where it
	  was inconsistent.
</ul>

<H1><A NAME="xterm_79">Patch #79 - 1998/6/28 - XFree86 3.9Ai</A></H1>

This patch fixes several small bugs:
<ul>
	<li>use X_EXTRA_LIBS in standalone Makefile.in (patch by Tomas Vanhala).

	<li>add new resource 'oldXtermFKeys' which provides backward compatibility
	  for F1-F4 control sequences with TOG's xterm.

	<li>determine the server's default foreground/background Pixel values,
	  needed if the -flipPixels X server option is used (reported by
	  David Dawes).

	<li>correct logic for F1-F4 function keys so that they generate VT100
	  compatible escape sequences in VT220 mode, since that is what the
	  numeric keypad is supposed to do (reported by Ron Johnson, Jr.
	  &lt;ronjohn@communique.net&gt;).

	<li>modify logic for editing keypad to work more like VT220: don't
	  pass those codes in VT100-mode unless oldXtermFKeys mode is set.

	<li>correct an interaction with the editing-keypad logic that prevented
	  backarrow key from sending a 127 for the delete key (the 'remove'
	  escape sequence was being sent instead).

	<li>use return-value from getuid() rather than the parameter, to work on
	  systems which do not update the latter (patch by Kevin Buhr
	  &lt;buhr@mozart.stat.wisc.edu&gt;)

	<li>correct scrollbar border color when toggling to/from secure keyboard
	  mode (patch by Jeff Uphoff &lt;juphoff@tarsier.cv.nrao.edu&gt;)

	<li>modifications to terminfo file:
<ul>
	  <li>rename description to xterm-xfree86, adding an entry 'xterm'
	    which is derived from xterm-xfree86 to simplify customization.

	  <li>change string for kdch1 from \177 to \E[3~, to address complaints
	    from Debian developers.  (This applies to the key labeled "Delete",
	    and does not affect the backarrow key).

	  <li>add user-strings u6, u7, u8, u9 to entries to make them work with
	    Daniel Weaver's "tack" program.

	  <li>modify xterm-24, xterm-bold, xterm-boldso entries to disentangle them from
	    explicit dependency upon xterm-xfree86.

	  <li>add generic 'xterm-color' entry.

	  <li>minor corrections to xterm-xfree86, xterm-8bit, xterm-r5 and
	    xterm-r6 entries.
</ul>
</ul>

<H1><A NAME="xterm_78">Patch #78 - 1998/6/3 - XFree86 3.9Ah and 3.3.2</A></H1>

Again, most of the bulk of this patch is for ANSI conversion.  I used the
IRIX compiler's -wlint option to find the remaining functions that use
K&amp;R syntax (since gcc does not do this properly).

Also, I changed the logic in the print code slightly to close unwanted files
before opening a pipe to the printer.  This may help in some configurations
where the line printer hangs until xterm closes the pipe.

<H1><A NAME="xterm_77">Patch #77 - 1998/5/26 - XFree86 3.9Ah and 3.3.2</A></H1>

Most of the bulk of this patch is to convert the extended C (K&amp;R functions
with prototypes) to ANSI.  I verified that on Linux by comparing object
files, to ensure that I did not, for example, interchange parameters in
the function declarations.
<p>
The rest of the patch fixes several minor bugs, and adds a few features:
<ul>
	<li>back-out my use of ncurses "captoinfo -f" option (if/then/else/endif)
	  formatting, since ncurses did not correctly filter embedded newlines
	  in terminfo capability strings until _after_ ncurses 4.1, thus
	  corrupting setf/setb/sgr strings (reported by Darren Hiebert and
	  others).

	<li>document SGR 8, 28 (invisible/visible), add corresponding
	  capabilities to terminfo description.
<p>
	  I would also add the 'prot protected capability, but the control
	  sequences for that would not be recognized or properly ignored by the
	  older xterm programs.

	<li>modify ChangeGroup to not suppress a null-resource, but treat it as an
	  empty string (recommended by Stefan Dalibor).

	<li>add printerAutoClose resource to control whether printer is closed
	  when going offline.  More than one person reports problems (on
	  Solaris 2.6 and Digital Unix 4.0) getting the printer to proceed
	  unless xterm exits; I think that it is a problem flushing the pipe.
	  Closing it ought to flush it.

	<li>adapt TOG fix-3 to in HandleKeymapChange and VTInitI18N (but adapt
	  XtStackAlloc/XtStackFree for clarity, as well as fixing memory leak).

	<li>change calls on FillCurBackground to ClearCurBackground, in effect
	  using XClearArea rather than XFillRectangle when clearing as a
	  side-effect of scrolling and insertion  (patch by Alexander V
	  Lukyanov)

	<li>correct some places where insert/delete did not _move_ the color
	  attributes, using memmove (patch by Alexander V  Lukyanov
	  &lt;lav@long.yar.ru&gt;)

	<li>add ifdef's for __CYGWIN32__, for port to cygnus version B19.1
	  (patch by Andrew Sumner &lt;andrew_sumner@hotmail.com&gt;).

	<li>remove #define for hpux that turned on USE_SYSV_ENVVARS, since this
	  causes some applications (such as 'less') to get incorrect $LINES and
	  $COLUMNS values (reported by Clint Olsen).

	<li>modify behavior for HP-UX, to set the "reserved" process group
	  controls to _POSIX_VDISABLE so the TIOCSLTC ioctl does not produce an
	  error (patch by Ben Yoshino &lt;ben@wiliki.eng.hawaii.edu&gt;).

	<li>correct length of underlining, reducing it by one pixel to avoid
	  leaving a dot when the application does not clear the whole screen
	  (patch by (Sergei Laskavy &lt;Laskavy@cs.msu.su&gt;).
<p>
	  I noticed this only recently myself (and other people as well); it
	  depends on the font chosen.  A 6x10 font shows it, but the other
	  fonts (from XTerm.ad) do not.  I also see a similar problem with the
	  emulation of bold fonts.

	<li>add include for Xos.h to xterm.h, to ensure proper definitions
	  (reported by Holger Veit).

	<li>update config.guess to recognize Unixware 2.1 and 7 (patch by
	  Mike Hopkirk &lt;hops@sco.com&gt;).
</ul>

<H1><A NAME="xterm_76">Patch #76 - 1998/5/8 - XFree86 3.9Ah and 3.3.2</A></H1>

A fix for the print-window function, and some minor cleanup:
<ul>
	<li>modify logic that closes pipe in the print-window function to not use
	  pclose, which does not work on all systems, since I did not open the
	  pipe with popen (reported by Stefan Dalibor).

	<li>correct name of $(EXTRA_LOAD_FLAGS) imake variable (reported
	  by Stefan Dalibor).

	<li>guard logic in ChangeGroup() function against null pointer
	  (reported by Stefan Dalibor).

	<li>ensure that menu entry for toggling sunKeyboard resource is
	  initialized (reported by Branden Robinson &lt;branden@purdue.edu&gt;).

	<li>gcc unused-variable warnings (reported by Bernd Ernesti
	  &lt;bernd@arresum.inka.de&gt;)

	<li>rename global variable 'buffer' to 'VTbuffer'
</ul>

<H1><A NAME="xterm_75">Patch #75 - 1998/5/7 - XFree86 3.9Ah and 3.3.2</A></H1>

This incorporates fixes from several people, as well as some improvements
that I made based on feedback from users:
<ul>
	<li>add option to standalone configure script, "--with-own-terminfo-dir",
	  which causes xterm to pass a predefined value of $TERMINFO to the
	  application.  Also use this value in install rule "make install-ti",
	  for the standalone configure script.

	  (patch &amp; feedback from Tor Lillqvist &lt;tml@hemuli.tte.vtt.fi&gt;)

	<li>change ifdef's for "hpux" to "__hpux" (patch by Tor Lillqvist).  The
	  imake configuration uses the former, but the latter is predefined by
	  HP's compilers.

	<li>define USE_SYSV_ENVVARS for HP-UX, curses does not use $TERMCAP (patch
	  by Tor Lillqvist).

	<li>on HP-UX, use the /dev/ptym/clone device to allocate PTY's.  Works
	  both on HP-UX 9 and 10.  (patch by Tor Lillqvist).

	<li>modify configure script to obtain the $(EXTRA_LOADFLAGS) value from
	  imake, needed for compiling under DEC OSF/1 (reported by
	  Stefan Dalibor)

	<li>modify print-window action so that the printer is closed after
	  printing a window, unless the printer was already opened (i.e.,
	  by an application running in the window).  This makes the printing
	  complete without having to exit xterm, since not all systems treat
	  fflush through a pipe very well (reported by Stefan Dalibor)

	<li>modify printing code so that the ^M's are not printed if the
	  printAttribute resource is set to zero (request by Stefan Dalibor).

	<li>correct typo in xterm.man, for the default value of printAttribute
	  (reported by Stefan Dalibor).

	<li>correct printing code so that the alternate character set is
	  printed, like other attributes, with escape sequences.

	<li>correct termcap description, removing spurious 'm' character from
	  the 'op' capability (reported by Greg Woods &lt;woods@weird.com&gt;).

	<li>correct trace code so that the initial timestamp is set.

	<li>correct/modify utmp data for the Linux glibc 2 configuration,
	  so that the ut_line member is set before using it to update wtmp
	  (patch by Bill Nottingham &lt;wen1@cec.wustl.edu&gt;).
</ul>

<H1><A NAME="xterm_74">Patch #74 - 1998/4/27 - XFree86 3.9Ag and 3.3.2</A></H1>

This corrects a couple of recent bugs and adds a new resource:
<ul>
	<li>modify definition of TRACE_CHILD so that it does not conflict with
	  ifdef's for USE_USG_PTYS in main.c (reported by Vikas Agnihotri
	  &lt;VikasA@att.com&gt; and Stefan Dalibor).

	<li>correct ownership of file (actually pipe) written by the print
	  controls.  When undoing the setuid changes in patch #69, I overlooked
	  this.  Now xterm forks a process which resets setuid and routes the
	  printer data as the real user.

	<li>add a new resource, "printAttributes", which controls whether
	  color attributes (or any attributes) are sent to the printer.
</ul>

<H1><A NAME="xterm_73">Patch #73 - 1998/4/25 - XFree86 3.9Ag and 3.3.2</A></H1>

This patch does the following:
<ul>
	<li>implements a print-window facility for xterm.  Though useful in
	  itself, I added it as part of some debugging which I am doing.
	  (Occasionally during an exposure event xterm fails to restore the
	  proper colors for highlighted text, and printing the screen will
	  show the internal states nicely).
<p>
	  The print facility now also displays the color information.
	  (I will probably make this a resource).

	<li>modified the xterm-16color terminfo description to use the setaf and
	  setab strings, which is a little more efficient (requested by Stephen
	  Marley).

	<li>reduced some clutter of the ifdef/includes (e.g., stdlib.h, unistd.h,
	  errno) making the configure script test for these.
<p>
	  I removed the symbols Size_t and Time_t, since they no longer serve
	  a useful purpose.

	<li>added some debugging traces to show the initial screen size,
	  and the success/failure of the ioctl calls pass handle window
	  resizing events to the application (for Clint Olsen).
<p>
	  I also modified the trace code to produce two files since some
	  of the information is produced by the child process.  So now
	  they are Trace-parent.out and Trace-child.out

	<li>updated configure test for ANSI compiler options to handle a
	  special case for HP-UX 10.x (reported by Clint Olsen).
</ul>

<H1><A NAME="xterm_72">Patch #72 - 1998/4/17 - XFree86 3.9Ag and 3.3.2</A></H1>

This is a patch from Chris Siebenmann &lt;cks@hawkwind.utcs.toronto.edu&gt;,
which I have cleaned up a little, and integrated into the configure script.
<p>
From his description:
<blockquote>
 This set of patches is the latest incarnation of patches originally
written by Ian! D Allen, then of the University of Waterloo and now of
who knows where; I have been carrying them forward from xterm to xterm
ever since about X11R4.  What they do is add an option so that when an
iconified xterm receives output it prepends '*** ' to its icon title
and (optionally) beeps the bell; deiconifying the xterm removes the
'*** '. Over the years I've found this to be incredibly convenient for
monitoring all sorts of low-activity things.
</blockquote>

<H1><A NAME="xterm_71">Patch #71 - 1998/4/12 - XFree86 3.9Ag and 3.3.2</A></H1>

This patch is a slightly modified version of one by Richard Braakman, which
prevents buffer overflow in the input-method and preedit-type parsing in xterm.
I changed a couple of details to make the code more maintainable, and looked
for similar things - copying into a fixed-size buffer (found none, though I did
spot an unused variable).

<H1><A NAME="xterm_70">Patch #70 - 1998/3/29 - XFree86 3.9Af and 3.3.2</A></H1>

This patch corrects some minor bugs in xterm, and fills in some more details
in the VT220 emulation:
<UL>
	<LI>modify Imakefile to use SpecialCObjectRule for menu and data modules,
	  making xterm build properly if logging is enabled
	  (patch by Scott Sewall &lt;scott@iprg.nokia.com&gt;).

	<LI>restore "ich" capability to terminfo entries, since
	  Michael Schroeder points out that "ich1"
	  is the one which is the problem in Solaris vi.

	<LI>correct color of cursor, which would disappear on inverse-video
	  since the initialization did not compare the cursor color against
	  both foreground and background (reported by Olivier Calle).

	<LI>correct abbreviation-test for -version and -help options, making
	  command-line option -vb work (reported by Stefan Dalibor).

	<LI>correct a dependency between ifdef's for OPT_I18N_SUPPORT and
	  OPT_INPUT_METHOD (reported by Stefan Dalibor).

	<LI>split-out character-set translations as new module charsets.c, to
	  implement VT220 national replacement character sets (a mode where
	  some of the characters are displayed as specific European glyphs).
	  This relies on xterm using an ISO 8859-1 font (approach suggested by
	  Kenneth R. Robinette &lt;zkrr01@mailbox.neosoft.com&gt;).

	<LI>correct a missing increment, which made SS2 and SS3 controls
	  repeat the shifted character.

	<LI>add xterm-nrc to terminfo to illustrate the VT220 national
	  replacement character sets.

	<LI>reformat terminfo using new ncurses tic option "-f", which makes
	  if/then/else/endif expressions easier to read.
</UL>

<H1><A NAME="xterm_69">Patch #69 - 1998/3/16 - XFree86 3.9Ad and 3.3.2</A></H1>

This corrects the problem in xterm with utmp, reported by Olivier Calle
&lt;olivier@tc.fluke.com&gt;
as well as some other people after the XFree86 3.3.2 release.
<P>
The error was introduced by my patch #53 in XFree86 3.9r (October 1997).
<P>
The correction removes the reset of setuid/setgid before the main event loop,
and solves the problem which I had worked around in a different manner:  for
some reason, the particular waitpid() call in creat_as() hangs, does not
return when the child process exits.  I changed the ifdef's to force the Linux
configuration to use wait() instead.  This call appears to work properly on
other platforms such as SunOS and Solaris.
<P>
I also added tests in the standalone configure script to check for the
existence of waitpid().

<H1><A NAME="xterm_68">Patch #68 - 1998/3/4 - XFree86 3.9Ad and 3.3.1z</A></H1>

This corrects another problem with the logic for highlightColor resource.
As reported by David Dawes:
<blockquote>
	I've just noticed a problem with with the "inverse" control sequence
	(ESC[7m) with the 3.3.2 xterm.  What it does is sets the background
	black, and the text the usual foreground colour rather than simply
	swapping the foreground/background.

</blockquote>
This appears to be because when I added logic to check that the highlightColor
was distinct from foreground and background colors, I did not add a further
check to see that it was not black (I would make an explicit check for the
resource not being set, but see nothing definite in the headers that would let
me reference an explicitly-undefined Pixel value, though there are some
implications in xpm.h).  But this should work.

<H1><A NAME="xterm_67">Patch #67 - 1998/2/23 - XFree86 3.9Ad and 3.3.1e</A></H1>

This patch does the following:
<UL>
	<LI>improve test for highlightColor so that xterm does not attempt to
	  use that unless it is different from the foreground and background
	  colors (reported by Stefan Dalibor
	  &lt;Stefan.Dalibor@informatik.uni-erlangen.de&gt;.
<P>
	  I could not reproduce this until I noticed that the -rev option
	  exposed it nicely.

	<LI>remove ich and ich1 from xterm and xterm-8bit terminfo descriptions.
	  SVr4 terminfo documents that you must not combine these with
	  smir/rmir, but ncurses allows it, opening a hole.  Solaris 2.6 vi
	  does not work properly if it is using a terminfo description when
	  these are combined, since it was written to accommodate old terminals
	  that required it (reported by Stephen Marley).

	<LI>restore 1-pixel overlap of scrollbar border with left edge of window
	  (reported by Jim Burmeister &lt;jimb@metrolink.com&gt;).

	<LI>add a configure option, --enable-logfile-exec, which allows the
	  user to specify a pipe for logfile.  This defines ALLOWLOGFILEEXEC.

	<LI>makes the ALLOWLOGFILEEXEC code compile &amp; run, if configured.

	<LI>minor documentation nits.
</UL>

<H1><A NAME="xterm_66">Patch #66 - 1998/2/16 - XFree86 3.9Ad and 3.3.1d</A></H1>

This fixes the problem reported with failure to build the <EM>resize</EM>
program (BSDI, OSF/1) due to not having &lt;termcap.h&gt;, by changing the
ifdef to one that would be set only if the file exists (not currently
specified, except by the standalone configure script).  We do not really need
to include &lt;termcap.h&gt; to build, but only for a clean compile, since it
may declare the tgetent() prototype.

I also updated the man-page for <EM>resize</EM>, since I had recently noticed
that it can be used to resize <EM>xterm</EM> using the "Sun" control sequences
option.

<H1><A NAME="xterm_65">Patch #65 - 1998/2/14 - XFree86 3.9Ad and 3.3.1c</A></H1>

This is a small patch to xterm's 8-bit terminal description.  I noticed
while testing ncurses that I had specified the wrong (VT100-style) codes
for the F1-F4.  Xterm only uses VT220-style function keys in 8-bit mode.

<H1><A NAME="xterm_64">Patch #64 - 1998/2/8 - XFree86 3.9Ad</A></H1>

This fixes the following problems with xterm:
<UL>
	<LI>save/restore the ANSI foreground and background colors with the other
	  visible attributes in the save-cursor and restore-cursor operations.
	  This works around a problem with vim, which apparently assumed that
	  switching between the normal and alternate screens resets the colors
	  (reported by Jim Battle &lt;jb@chromatic.com&gt;).
<P>
	  It would be nice to implement save/restore cursor as a stack (and
	  solve this type of problem completely), but that would lead to
	  incompatibility with applications which assume they are running with a
	  VT100 or VT220.

	<LI>corrects behavior of a restore-cursor operation which does not
	  follow a save-cursor (it is supposed to set the character sets
	  to a known initial state).

	<LI>extends the sunKeyboard resource (and menu toggle) to modify the
	  home, end and delete keys on a Sun or PC editing keypad, making them
	  generate codes compatible with DEC VT220's Find, Select and Remove
	  keys.

	<LI>corrects a length in checking command-line options, which caused the
	  "-help" message to not work when X was not running.

	<LI>adds some detail to the man-page (requested by Jason Bacon
	  &lt;acadix@execpc.com&gt;)

	<LI>modify the standalone configure script to ignore the broken nsl and
	  socket libraries on IRIX 6.2 (the ones on 5.2 also are broken, so
	  this change just widens the check for the system version number).
</UL>

<H1><A NAME="xterm_63">Patch #63 - 1998/2/5 - XFree86 3.9Ad</A></H1>

This is another patch from Bjorn Helgaas &lt;helgaas@rsn.hp.com&gt;, which I've
reviewed (and learned some).  Following are his notes:
<P>
I poked around some more and finally got xterm-62 to build and run
cleanly on HP-UX 10.20.  Here are the patches.  They look sort of
ugly, so here's a little explanation:
<UL>
        <LI>aclocal.m4: Removed side effects from the AC_CACHE_VAL
        commands in CF_FUNC_TGETENT.  Previously, LIBS was set inside
        AC_CACHE_VAL, which worked fine the first time configure was
        run, but failed if there were cached values.

        <LI>aclocal.m4: Added temporary setting of LIBS before
        AC_TRY_LINK in CF_FUNC_TGETENT.  Previously, the last value set
        by the AC_TRY_RUN loop was used, so only -lcurses was checked.

        <LI>configure.in: Added temporary setting of CPPFLAGS before
        AC_CHECK_HEADERS for X11 files.  Previously &lt;X11/DECkeysym.h&gt;
        and &lt;X11/Xpoll.h&gt; were found only if they were in the compiler's
        default include directories, even if `--x-includes=DIR' had been
        used or AC_PATH_XTRA had found them elsewhere.
</UL>
The problem on HP-UX was that we were linking with -lcurses rather than
-ltermcap due to the second bullet above, and apparently something in
HP-UX curses is broken.  This seems very strange, because the only thing
used is tgetent, which should affect any tty/pty configuration, but I
lost interest in tracking down the exact problem.

<H1><A NAME="xterm_62">Patch #62 - 1998/1/23 - XFree86 3.9Ac</A></H1>

This is a patch mostly by Bjorn Helgaas &lt;helgaas@dhc.net&gt; (I added the
os2main.c change, and a little of the documentation).  From Bjorn's
description:
<UL>
	<LI>If you use the "-hc &lt;color&gt;" option or set the "highlightColor"
	  resource, text is highlighted by changing only the background color,
	  rather than using reverse video.  I find this easier to read,
	  especially when selecting multi-colored text, and it is similar to
	  the way Netscape shows selections.

	<LI>Most of the code changes are under "#if OPT_HIGHLIGHT_COLOR".  The
	  principal exception is in screen.c, where I added a couple calls to
	  resetXtermGC().  This seems like it could be a bug even without
	  the color highlighting changes (though I don't pretend to understand
	  all the logic).
</UL>

<H1><A NAME="xterm_61">Patch #61 - 1998/1/17 - XFree86 3.9Ac</A></H1>

This patch modifies the reset behavior of xterm slightly:
<UL>
	<LI>change the terminfo entry so that rs1 (one of the strings used by
	  the 'reset' program) does a hard reset rather than switching
	  character sets.  This is more in accord with other terminal
	  descriptions.

	<LI>modifies the treatment of hard reset by the xterm program to
	  reset the saved lines.

	<LI>corrects hard reset by also resetting user-defined keys (DECUDK).
</UL>

<H1><A NAME="xterm_60">Patch #60 - 1998/1/10 - XFree86 3.9Ab</A></H1>

This fixes some minor bugs and adds new functionality:
<UL>
	<LI>add support for blinking text.
<UL>
	  <LI>This does not actually cause the
	  text to flash, but text with the blink attribute can be displayed
	  in color, using new resources colorBL and colorBLMode.

	  <LI>If colors are not used, the blinking text will be displayed as
	  before (just like bold).  The main purpose of this is to make
	  applications work properly when they assume the emulator supports
	  blinking text.

	  <LI>I did this by moving the per-cell LINEWRAPPED flag to a per-line
	  flag, to make room for the new BLINK flag.  There were no per-line
	  flags, so this changes a lot of logic.
</UL>

	<LI>corrected missing save-cursor logic in the handling of SGR 1048
	  (the new control sequence I added in patch #54, 1997/10/17).
	  Reported by Darren Hiebert.

	<LI>flush the output of the transparent printing after each line
	  Reported by Tomas Vanhala &lt;vanhala@ling.helsinki.fi&gt;.

	<LI>correct the modes that are affected by save/restore cursor by adding
	  WRAPAROUND and PROTECTED.

	<LI>corrected placement of one of the XSync calls that I added in patch
	  #51, 1997/9/15, which had the side-effect of writing on the window
	  border when the xterm was resizing from 132 to 80 columns.

	<LI>work around an incompatibility of the XKB definition used in xterm
	  versus that symbol from IRIX 6.2's imake definitions (by adjusting
	  the standalone configure script).
</UL>

<H1><A NAME="xterm_59">Patch #59 - 1998/1/5 - XFree86 3.9Ab</A></H1>

My last patch has an off-by-one error in the comparison for argc.  Douglas
Kosovic &lt;douglask@dstc.edu.au&gt; showed me where (he got a core dump).
Also, I think this explains Clint Olsen's problem, but the symptoms were more
subtle (EINVAL for a system call if the -display option is omitted).

<H1><A NAME="xterm_58">Patch #58 - 1998/1/3 - XFree86 3.9Ab</A></H1>

This patch does the following:
<UL>
	<LI>implement logic to permit xterm to work with proportional fonts.
<UL>
	  <LI>Thomas Wolff
	  &lt;Thomas.Wolff@sietec.de&gt;
	  requested this (but it isn't exactly what he's asking
	  for - that's a more involved task).

	  <LI>I chose to do this by rendering the characters on a fixed pitch,
	  because it would not be useful for existing applications to display
	  varying numbers of characters on each line.

	  <LI>Except that this forces the display to be wider, it works reasonably
	  well.  A couple of special cases (reverse + colorBD, for example)
	  do not display with proper colors, since the inter-character gaps
	  are painted with the background.
</UL>

	<LI>added a version number to the program (several people have requested
	  this).

	<LI>make the -version and -help options interpreted before the program
	  attempts to open the display.

	<LI>minor reorganization of the man-page (ordered the options, resources
	  and translations alphabetically - and eliminated some duplication).

	<LI>corrected a misspelled filename in Makefile.in, and added a lint
	  rule.

	<LI>updated the configure script to correct behavior when it cannot
	  find imake, as well as to fix the IRIX+gcc build (conflict with
	  /usr/include).

	<LI>regenerated the configure script with a newer patch to autoconf
	  that fixes a problem with environment space vs the configure --help
	  message.
</UL>
<H1><A NAME="xterm_57">Patch #57 - 1997/12/26 - XFree86 3.9Aa</A></H1>

This patch is mostly concerned with the standalone configure script; a few
minor corrections are added:
<UL>
	<LI>add configure option --disable-tek4014, to allow xterm to be built
	  without the tek4014 emulation.

	<LI>add configure option --with-terminal-type, to allow xterm to be
	  compiled with default $TERM value other than "xterm" (e.g.,
	  "xterm-16color") -- requested by Stephen Marley &lt;stephen@memex.com&gt;.

	<LI>fix a typo in the configure --help message -- reported by Darren
	  Hiebert &lt;darren@hmi.com&gt;.

	<LI>review diffs between main.c and os2main.c, to make them more alike.
	  (applies some minor bug-fixes to OS/2's version).

	<LI>add missing quotes in memmove/bcopy configure test
</UL>


<H1><A NAME="xterm_56">Patch #56 - 1997/11/28 - XFree86 3.9x</A></H1>

This patch is based on analysis by Arfst Ludwig &lt;arfst@luxor.IN-Berlin.DE&gt;,
who reported:
<blockquote>
	Setting the following resources xterm (all current versions) receives a
	segmentation fault on &lt;Btn2Up&gt; after scrolling:
<PRE>

	  *XTerm*VT100*translations:    #override \
	      ~Shift~Ctrl&lt;Btn2Up&gt;: insert-selection(PRIMARY, CUT_BUFFER0)\n\
	      Shift~Ctrl&lt;Btn2Up&gt;:  insert-selection(CLIPBOARD, CUT_BUFFER1)\n\
	      ~Shift&lt;BtnUp&gt;:       select-end(PRIMARY, CUT_BUFFER0)\n\
	      Shift&lt;BtnUp&gt;:        select-end(CLIPBOARD, CUT_BUFFER1)
</PRE>
	(The above resources intention is to be able to paste the latest
	selection even if the xterm was cleared.)
<P>
	And here is how it works (and a fix!):  The widget given to the action
	handler as first argument is not guaranteed to be a XtermWidget (it can
	be the ScrollbarWidget).  Instead of accessing the widget's member
	directly XtDisplay gives the required pointer in a safe way.
</blockquote>
I noticed that this was not the only instance (by reading the code, and testing
with his example), and extended the solution to check the widget-class to
ensure that it is indeed xterm's widget class before attempting to use it in
the context of translations.

<H1><A NAME="xterm_55">Patch #55 - 1997/11/25 - XFree86 3.9x</A></H1>

This fixes the segmentation violation noted by Rogier Wolff about a month
ago.  He'd set xterm to 400 (rows) by 150 columns, which broke because there
were limited buffers (200 rows) used for juggling data when adding or deleting
lines and for switching between alternate and normal screens.  I replaced this
by an allocated buffer.
<P>
The bug is simple to test if you set titeInhibit false.

<H1><A NAME="xterm_54">Patch #54 - 1997/10/17 - XFree86 3.9s</A></H1>

This patch does the following:
<UL>
	<LI>correct a minor placement problem with the right scrollbar.

	<LI>implement a new set of control sequences for switching between the
	  normal and alternate VT100 screens.  These work around the older
	  sequences limitation that required modification of the runtime
	  $TERMCAP to cooperate with the titeInhibit resource (that can't work
	  with terminfo).  I do this by moving all of the functionality of the
	  rmcur terminfo capability into the control sequences.

	<LI>implement the alternate-screen menu entry
</UL>

<H1><A NAME="xterm_53">Patch #53 - 1997/10/12 - XFree86 3.9r</A></H1>

This patch adds a fix and implements a new feature (as well as some minor
typos):
<UL>
	<LI>JCHANDRA@Inf.COM (JCHANDRA) noted that there was still a problem
	  with the wait call with the logging option.  It hung when the logfile
	  was opened as a command-line option.  I fixed this by moving the
	  StartLogging() call down past the place where I'd reset the setuid
	  mode.  So the logfile is opened as the real user, without having
	  to fork.

	<LI>Michael Rohleder &lt;michael.rohleder@stadt-frankfurt.de&gt; sent
	  me a patch which implements right-scrollbars for xterm.  I used that
	  as a starting point, renamed the command-line options and reduced
	  the number of ifdef's.
</UL>

<H1><A NAME="xterm_52">Patch #52 - 1997/9/29 - XFree86 3.9q</A></H1>

This patch addresses bugs and requests reported by
<UL>
	<LI>Bob Maynard &lt;rmaynard@montana.com&gt;,
	<LI>Clint Olsen &lt;olsenc@ichips.intel.com&gt;,
	<LI>JCHANDRA@Inf.COM (JCHANDRA),
	<LI>Michael Schroeder &lt;Michael.Schroeder@informatik.uni-erlangen.de&gt;,
	<LI>Pablo Ariel Kohan &lt;pablo@memco.co.il&gt;
</UL>

Some of the changes are interrelated (it was an unusually busy week).
<UL>

	<LI>change the default resource value for colorMode to true, matching
	  the Xterm.ad file.

	<LI>correct behavior of 'ech' control, making the default and 0
	  parameters erase one character rather than to the end of line
	  (reported by Michael Schroeder).

	<LI>add resource boldColors, command-line options +pc and -pc and
	  configure-script option to specify behavior of xterm's mapping bold
	  colors 0 through 7 to colors 8 through 15.
	  (request by Pablo Ariel Kohan).

	<LI>add resource colorAttrMode to specify whether colorULMode and
	  colorBDMode can override the ANSI colors
	  (from a problem report by Clint Olsen).

	<LI>correct a conflict between colorULMode/colorBDMode versus ANSI
	  colors, where exposure events would occasionally pick up the
	  former (e.g., colorBD) rather than ANSI colors.  Testing the
	  colorAttrMode made this apparent, though it has been in the
	  code since 3.2A (patch #35 in Jan 1997).

	<LI>correct two problems with the optional logging support.  On Linux
	  at least, the waitpid call in creat_as hangs when the logging is
	  toggled from the popup menu.  Also, the mktemp template has the wrong
	  number of X's (since X11R5!).  Fixed the waitpid problem by
	  exploiting the fact that the setuid behavior is reset before the
	  popup menus are available.
	  (reported by Jayachandran C.).

	<LI>add configure script options for building with the Xaw3d and neXtaw
	  libraries.

	<LI>correct CF_IMAKE_CFLAGS standalone configure script macro, so that it
	  will pick up $(ALLDEFINES) rather than $(STD_DEFINES).  This is
	  needed to make scrollbars work on Linux, since that uses narrow
	  prototypes.
	  (reported by Bob Maynard).

	<LI>various minor updates to configure-script macros.
</UL>

<H1><A NAME="xterm_51">Patch #51 - 1997/9/15 - XFree86 3.9p</A></H1>

Most of this patch is related to the standalone configure script, though
there are fixes/enhancements as well:
<UL>
	<LI>add a new resource sunKeyboard, with associated command-line
	  option and menu-toggle that allows using a normal Sun or PC
	  keyboard to generated the complete DEC-style function keys
	  and keypad.

	<LI>correct a reversed foreground/background test in the control
	  sequence that replies with the current SGR settings.

	<LI>correct, by invoking XSync, a display problem that caused the
	  program to not properly update newly exposed areas when a font
	  change or 80/132 resize request was not completely accepted.

	<LI>restructured autoconf macros (I made a library of all of the
	  macros across the complicated configure scripts I'm working on).

	<LI>use the autoconf config.guess and config.sub scripts to better
	  identify the host-os.

	<LI>improve the configure script that uses 'imake' as a fallback for
	  definitions.

	<LI>correct several instances of unsigned/signed mixed expressions.
</UL>

I've tested the configure script on Linux, SunOS 4.1.3, Solaris 2.5.1,
IRIX 5.2 and 6.2, AIX 3.2.5 and CLIX 3.1 (all but the last run properly
as well).

<H1><A NAME="xterm_50">Patch #50 - 1997/8/22 - XFree86 3.9m</A></H1>

This is a collection of small fixes, and a couple of minor enhancements:
<UL>
	<LI>plug a security hole in the implementation of Media Copy (print)
	  by invoking setuid just before the main loop.

	<LI>add an ifdef'd include for &lt;sys/termio.h&gt; for HP-UX, which allows
	  the program to process SIGWINCH events (this is a bug in X11R6.3)

	<LI>add state-table entries for VT52 emulation to enter/exit keypad
	  application mode.

	<LI>disable the popup-menu entry for 8-bit controls when the terminal-id
	  is less than 200 (e.g., VT52 or VT100).

	<LI>ensure that the popup-menu entry for 8-bit controls is updated when
	  the application enables/disables this mode, including the response
	  to a full-reset.

	<LI>implement VT300 DECBKM feature: set interpretation of the backarrow
	  key to either backspace or delete.  The initial setting is via
	  resource; it can also be modified in the main popup menu.

	<LI>implement VTxxx KAM (ISO AM), which allows a keyboard to be locked
	  (i.e., the terminal discards input).

	<LI>implement VTxxx SRM, which is used to control local echoing of
	  input on the terminal.

	<LI>add terminfo and termcap entries for xterm-8bit, a variation of
	  the xterm description that uses 8-bit control characters.

	<LI>add fallback definitions for Imakefile to allow it to work on some
	  X11R5 systems that have no SpecialCObjectRule or ProgramTargetName
	  macros.

	<LI>add .c.o and .c.i rules to standalone Makefile.in

	<LI>correct order of -lXmu and -lXext in standalone configure script.

	<LI>add configure script options to allow selective disabling of
	  active-icon, input-method and i18n code (mainly for users with X11R5
	  or an incomplete X11R6 configuration).

	<LI>change menu-indices from #define's to enum values, thereby making
	  it work better with the ifdef's for logging and active-icon (the
	  X11R6.3 active-icon code is incorrectly ifdef'd; this corrects an
	  error introduced by incorporating that code).

	<LI>correct minor compile errors in the configuration where active-icon
	  is not used.

	<LI>add configure option to suppress echoing of long compiler commands

	<LI>correct spelling of decTerminalID in configure script help message

	<LI>use gcc __attribute__((unused)) to quiet warnings about unused
	  parameters when compiling with -W (to make it simpler to find the
	  real problems).
</UL>

<H1><A NAME="xterm_49">Patch #49 - 1997/8/10 - XFree86 3.9k</A></H1>

This patch implements the VT100/VT220 Media Copy (i.e., print-screen) control
sequences.

<H1><A NAME="xterm_48">Patch #48 - 1997/7/26 - XFree86 3.9j</A></H1>

This patch does the following (all but the first affect only the standalone
configure script):
<UL>
	<LI>minor correction to positioning of underlines for small (e.g., 5x8)
	  font size.
	<P>
	  The existing behavior allowed underlines to be drawn outside the
	  character-cell, so they weren't cleared properly under some
	  circumstances.

	<LI>adds more special-case tokens to the standalone configure script's
	  imake-option filter (e.g., "&amp;&amp;", since a "make -n main.o" on my IRIX
	  system uses that shell construct).

	<LI>adds a '--enable-logging' option for the standalone configure script.

	<LI>adds check and ifdef's for the standalone configure script to allow
	  for building on platforms with X11R6, which lacks Xpoll.h (introduced
	  in X11R6.1).
</UL>

<H1><A NAME="xterm_47">Patch #47 - 1997/7/13 - XFree86 3.9i</A></H1>

This patch does the following
<UL>
	<LI>corrects an indexing error in the doublesize character logic
	  (button.c) that caused core dump (this was reported by J.  Wunsch).
	<LI>corrects the logic of ShowCursor when it is painting in a doublesize
	  cell (charproc.c).
	<LI>corrects, according to vttest, the behavior when switching to
	  doublesize characters and back again (doublechr.c).
	<LI>adds cbt (back_tab) to the terminfo description (this was something
	  that I'd overlooked as applicable to curses optimization last
	  summer).
	<LI>corrects, for the standalone xmc test, the logic for disabling xmc.
</UL>

<H1><A NAME="xterm_46">Patch #46 - 1997/7/4 - XFree86 3.9h</A></H1>

This is a patch to provide test-support for some work I'm doing on ncurses.  It
does not modify the normal configuration of xterm; the code is compiled if the
standalone configure option "--enable-xmc-glitch" is specified.

<H1><A NAME="xterm_45">Patch #45 - 1997/7/2 - XFree86 3.9h</A></H1>

This fixes the problem reported with xterm's cursor color versus the background
(the second chunk in this patch) and also removes some duplicate initialization
of the cursor GC's.  If the cursor color at startup is the same as the
background, then xterm will use the reverse GC, ignoring the setting of the
colorMode resource.

<H1><A NAME="xterm_44">Patch #44 - 1997/6/22 - XFree86 3.9g</A></H1>

This implements the first part of the VT100 doublesize characters for xterm,
as well as fixing a handful of bugs:
<UL>
	<LI>the doublesize character support uses the normal font (using scaled
	  fonts will be another patch) with blanks to simulate doublesize
	  characters.  This patch does most of the global changes that'll be
	  required.  I've hidden most of the details in macros and ifdef's so
	  it's easy to configure out (part of the patch is a configure option
	  for that purpose).

	<LI>corrected limits in DeleteChar() function -- it's always ignored the
	  size of the left border and scrollbar.  I noticed this when working
	  on the doublesize characters since the glitch was doubled in size
	  (i.e., it wrapped some garbage around the right margin).

	<LI>corrected 'memmove()' logic, for standalone builds (it referenced a
	  malloc wrapper from my development library).

	<LI>add a check for HideCursor() to prevent repeated screen updates
	  (which can cause a spurious cursor glitch to appear, e.g., during
	  scrolling).  I noticed this with the 3.2A version (but only a few
	  weeks ago, when I started working on this patch).
</UL>

<H1><A NAME="xterm_43">Patch #43 - 1997/6/10 - XFree86 3.9d</A></H1>

Here's a fix for two problems:
<UL>
	<LI>modify handling of tgetent results in xterm and resize programs to
	  make them tolerant of missing termcap file, or unknown terminal name.
	  In this scheme, an explicit "-tn" option will succeed, overriding
	  the fallback list.

	<LI>a nit in the configure script (log extra information to help diagnose
	  which case of the test-compile of tgetent was used).
</UL>

<H1><A NAME="xterm_42">Patch #42 - 1997/6/8 - XFree86 3.2Xl</A></H1>

Bram Moolenaar reported that the cursor color changed unexpectedly while
scrolling.  The cause was that it used the same GC's as the logic that draws
the ANSI colors.  The bug only appears if the cursorColor resource isn't set,
and has been present since the initial implementation early last year.  (The
same bug also appears in rxvt ;-).  Here's a fix.

<H1><A NAME="xterm_41">Patch #41 - 1997/5/28 - XFree86 3.2Xl</A></H1>

Some nits found by Darren Hiebert (missing part of install-rule, incorrect
assignment for --enable-color-mode option).

<H1><A NAME="xterm_40">Patch #40 - 1997/5/26 - XFree86 3.2Xl</A></H1>

Patch for the configure script's logic for obtaining imake predefined
symbols.

<H1><A NAME="xterm_39">Patch #39 - 1997/5/24 - XFree86 3.2Xl</A></H1>

This patch does the following:
<UL>
	<LI>integrate the 16-color change for 'xterm'

	<LI>minor fixes/clarification of tgetent in terminfo vs termcap to
	  'resize'
</UL>

(both changes also modify the configure script)

<H1><A NAME="xterm_38">Patch #38 - 1997/5/22 - XFree86 3.2Xh</A></H1>

This implements a simple configuration script with autoconf (to which I'll
add more options later).  It does the following:
<UL>
	<LI>configures xterm to build with X11R5 (at least on SunOS 4.1, Solaris
	  2.4, possibly IRIX - sorry network was down today, but I did test
	  an earlier version yesterday).

	<LI>enables/disables the configuration ifdef's for ANSI color and VT52
	  emulation.
</UL>
It does not make tests for the things that imake does (that's another project),
instead it uses a hybrid of the autoconf tests for libraries and adds imake's
compiler options (which are necessary in some cases to get main.c to compile).

<H1><A NAME="xterm_37">Patch #37 - 1997/5/7 - XFree86 3.9a</A></H1>

This corrects a minor, but annoying error in the vt220 emulation: the DECUDK
is only supposed to be interpreted for _shifted_ function keys.

<H1><A NAME="xterm_36">Patch #36 - 1997/1/16 - XFree86 3.2r</A></H1>

This corrects something that I overlooked in patch #27 (21-aug-1996), which is
that when trimming the region to be repainted for the highlightSelection
resource of xterm, I still have to paint the background past the highlighted
region.  This only happens when I first do a selection in a window that's
partly off-screen, then move the window on-screen.

<H1><A NAME="xterm_35">Patch #35 - 1997/1/7 - XFree86 3.2o</A></H1>

This patch does the following:
<UL>
	<LI>combines the coding for foreground and background colors into a
	  single byte, reducing the memory required to store saved-lines in
	  color.  (I'll take back that byte in a following patch to use to
	  ensure the character-set, so there's no long-term decrease in memory
	  use).

	<LI>modifies the PF1-PF4 coding in termcap/terminfo.  Because xterm is
	  still by default emulating vt100, the function key codes are
	  vt100-compatible (I overlooked this in patch #31).

	  I also reformatted the whole terminfo file into a single-column,
	  for consistency.

	<LI>adds an interim xterm-vt220 description to accommodate the old and new
	  styles of function-keys (though probably it'd be better to drop the
	  old-style altogether).
</UL>

<H1><A NAME="xterm_34">Patch #34 - 1997/1/5 - XFree86 3.2o</A></H1>

This patch does the following:
<UL>
	<LI>implement DECSTR (soft terminal reset).  The biggest diff is due to
	  adding another state table (note that there's only one useful state
	  here, but it's only 256 bytes rather than 1k as it would have been
	  before I reduced the size of state entries).

	<LI>some minor tidying up (e.g., signed/unsigned use bitcpy, MODE_DECCKM,
	  resetColor, resetCharsets).  More is done in patch #35.
</UL>

I got the description of DECSTR from a vt420 user's manual.  I'll do some
testing with vttest to ensure that there's nothing else to do than what was
documented.

<H1><A NAME="xterm_33">Patch #33 - 1996/11/24 - XFree86 3.2</A></H1>

This adds to the reset-fix by Matthieu Herrb &lt;Mathieu.Herrb@mipnet.fr&gt; a
small change to make xterm able to output 8-bit characters in VT100 mode.

Applications that run on real VT100's don't do that anyway, and this feature
should be removed sometime after finishing off the VT220 emulation (VT220's can
do 8-bit characters).  That would be a good time to change the default
terminal-id to 220.

<H1><A NAME="xterm_32">Patch #32 - 1996/11/21 - XFree86 3.2</A></H1>

This implements the REP (repeat) control for xterm.  That isn't part of the DEC
VTxxx series, but is defined in ISO 6429.  (Note that the base xterm terminal
description is <EM>not</EM> changed -- I added a variant, "xterm-rep").

<H1><A NAME="xterm_31">Patch #31 - 1996/11/16 - XFree86 3.2</A></H1>

This implements vt52 emulation in xterm (ifdef'd so it can be removed).
I've been using it for testing for the past month or so.

<H1><A NAME="xterm_30">Patch #30 - 1996/11/16 - XFree86 3.2</A></H1>

From bug-report by &lt;auroux@clipper.ens.fr&gt; (Denis Auroux), missing reset to
ground state.  I checked through the rest of <EM>that</EM> table and found another,
in the unimplemented MC (screen print).

<H1><A NAME="xterm_29">Patch #29 - 1996/9/15 - XFree86 3.1.2Gb</A></H1>

This patch does the following:
<UL>
	<LI>corrects the restoration of color for bold/underline color mode

	<LI>adds a resource 'decTerminalID' to control the reporting level of
	  xterm (e.g., VT100, VT220).

	<LI>uses the new resource to implement/correct the DA1, DA2 and
	  DECRPTUI reports.

	<LI>change valid-response code in DECRQSS from 0 to 1 (the manual says 0,
	  but the VT420 terminal I've been testing on says 1).
</UL>

All of these changes are based on vttest 2.6
<P>
(Most of the volume in the patch is to add 2 more state tables for parsing
the 2nd/3rd device-attribute controls).

<H1><A NAME="xterm_28">Patch #28 - 1996/8/31 - XFree86 3.1.2F</A></H1>

This patch corrects the following reported by Roland Rosenfeld
&lt;roland@spinnaker.rhein.de&gt;:
<UL>
	<LI>handle SGR 22, 24 and 25 in combination with colorUL and colorBD
	  resources.  Also noted &amp; fixed reset of colored underline/bold
	  with SGR 0.

	<LI>a typo in the termcap (missing '['), from 3.1.2Dj (my error)
</UL>

Roland also complained that he couldn't use box characters with
<PRE>
	-adobe-courier-bold-r-normal--12-120-75-75-m-70-iso8859-1
</PRE>
but that's a known xterm limitation (the box characters must be part of the
font, in the first 32 locations).

<H1><A NAME="xterm_27">Patch #27 - 1996/8/21 - XFree86 3.1.2Ek</A></H1>

This patch fixes one of my long-term gripes:  xterm's selection doesn't clearly
show what's being selected (as per David's request, it's controlled by a
resource, which defaults to the older behavior).

<H1><A NAME="xterm_26">Patch #26 - 1996/8/20 - XFree86 3.1.2Ei</A></H1>

Here's a patch to fix a problem with xterm's cut/paste and another to modify
the appearance of the highlighting while selecting.  (The changes are
independent, so you can see if the change to screen.c is desirable).

<H1><A NAME="xterm_25">Patch #25 - 1996/8/18 - XFree86 3.1.2Ei</A></H1>

Here's a correction for two minor bugs that I picked up in testing, plus
some lint (from Solaris 2.5) where NULL was used incorrectly:
<UL>
	<LI>make the second alternate font the same as the first (that's what
	  vt420 and dtterm do)

	<LI>corrected DECSCL report when DECSCL hasn't been set (i.e., don't
	  return a '60').
</UL>

<H1><A NAME="xterm_24">Patch #24 - 1996/8/11 - XFree86 3.1.2Ee</A></H1>

This patch does several things.  In effect, xterm can (I think) do a reasonably
good job of emulating vt220 and vt320 terminals (as well as it was doing
vt100, at any rate ;-).
<P>
It does NOT do:
<UL>
	<LI>soft fonts

	<LI>rigel or sixel graphics
</UL>
<P>
Anyway, I:
<UL>

	<LI>added ECH, CPL, CNL, SU, SD, CBT, CHT controls

	<LI>added popup-menu for switching between DEC and Sun function keys.
	  (corrected alignment err wrt logging entry at that point).

	<LI>make xterm recognize both 8-bit and 7-bit controls (including
	  popup menu for switching modes).

	<LI>add user-definable function keys (aka DECUDK)

	<LI>support concealed text

	<LI>support protected text (both ISO compatible and DEC compatible -
	  that's not the same thing, btw), with SPA, EPA, DECSCA, DECSED,
	  DECSEL controls.

	<LI>implement DECSCL.
</UL>
<P>
I'll be continuing to test this patch for a while, but don't expect to add any
new functionality (it passes all of the current tests I've built in vttest, but
I need to make more tests)..

<H1><A NAME="xterm_23">Patch #23 - 1996/7/31 - XFree86 3.1.2Ec</A></H1>

This removes the blinking cursor I added last week (for performance reasons).
Time-permitting, I'll revisit this after 3.2 is released (there <EM>will</EM> be more
work after XFree86 3.2, I assume).

<H1><A NAME="xterm_22">Patch #22 - 1996/7/26 - XFree86 3.1.2Ec</A></H1>

I looked more closely at my "double-negative" and realized that I had been
confused by the default color scheme (black on white) in combination with
reverse video.  However, I did see that the original_fg and original_bg data
weren't really used - so I removed that logic.
<P>
Also:
<UL>
	<LI>during initialization, check if ANSI colors are set with non fg/bg
	  values, disable color mode if not.  This makes xterm tolerant of
	  applications that allocate the whole color map.

	<LI>implemented blinking cursor (default is <EM>off</EM>)
</UL>

<H1><A NAME="xterm_21">Patch #21 - 1996/7/24 - XFree86 3.1.2Ec</A></H1>

This patch does the following:
<UL>
	<LI>fixes some minor typography in the control-sequences documentation
	  (it didn't occur to me til I'd sent the last patch that I could use
	  ghostview for previewing the troff output ;-)

	<LI>adjusts the shell's background color in ReverseVideo so that flicker
	  in resizing is reduced

	<LI>adds an ifdef OPT_ISO_COLORS to allow configuring xterm without
	  the ISO color support (saves a lot of memory)

	<LI>used that ifdef to isolate/modify logic so that if the user doesn't
	  have the colorMode enabled, then ISO color support is disabled (saving
	  memory).
	<P>
	  (If anyone needs numbers, I had savedLines set to 2000, and found
	  a reduction from ~700k to ~400k of allocated memory, according to
	  Purify).
</UL>

<H1><A NAME="xterm_20">Patch #20 - 1996/7/24 - XFree86 3.1.2Ec</A></H1>

This documents the changes in control sequences for window operations that
I added in my previous patch.  I'm testing another patch that allows the
user to use less memory if colors aren't needed.

<H1><A NAME="xterm_19">Patch #19 - 1996/7/21 - XFree86 3.1.2Ec</A></H1>

This patch does the following:
<UL>
	<LI>fixes the core dump that I reported on IRIX 5.2 (in main.c)
	<P>
	  (it's worth noting that this bug exists in X11R6.1, so I'd like
	  to assume that someone's already submitted a fix to X Consortium...)

	<LI>change the interpretation of zero rows or columns in a resize-window
	  request to use the root window's size (looking more carefully at
	  dtterm, that seems to be what it does).

	<LI>change some memmove calls to memcpy for slightly better performance.
	  (also, a couple of memset calls to bzero - Quantify says bzero runs
	  20% faster, I assume because there's one less argument).

	<LI>interpret character sets 1 and 2 (so that vttest gives a reasonable
	  result) Both rxvt and dtterm do something equivalent.

	<LI>fix a minor memory leak in the logic that retrieves the window or
	  icon names (Purify found this for me while I ran vttest).
</UL>

<H1><A NAME="xterm_18">Patch #18 - 1996/7/18 - XFree86 3.1.2Ec</A></H1>

This implements the following:
<UL>
	<LI>escape sequences that act like the CDE dtterm's window operations
	  (though I have implemented the default width and height -- I've seen
	  a rather buggy dtterm running that seems to treat width=0 or height=0
	  literally -- maybe that's a feature, not a bug?)

	<LI>minor tweak to the screen-repainting when resizing (I still cannot
	  entirely get rid of flicker).

	<LI>still more fixes to terminfo &amp; termcap (I corrected my error for
	  the hpa code and added some other stuff by comparing to ncurses'
	  description and rxvt's).

	<LI>a tweak to the patch by Michael Rohleder for the color translation

	<LI>re-order attribute codes to allow later implementation of protected
	  fields (dtterm supposedly does this; it's probably more useful than
	  blinking or invisible text -- that uses up all of the available bits
	  without changing the attribute scheme radically).
</UL>

<H1><A NAME="xterm_17">Patch #17 - 1996/7/2 - XFree86 3.1.2Eb</A></H1>

This patch implements for xterm several minor features from ISO 6429 which are
useful for terminfo applications.  The HPA and VPA control sequences allow
cursor movement along a row or column, cutting down a little on the characters
transmitted.  The other codes allow resetting specific graphic rendition
attributes without modifying the other attributes.

(now if someone just had time to implement blinking cursors...)

<H1><A NAME="xterm_16">Patch #16 - 1996/6/25 - XFree86 3.1.2Ea</A></H1>

Adam Tla/lka &lt;atlka@pg.gda.pl&gt; told me a couple of weeks ago that I'd missed
some of the background coloring in xterm.  I investigated, and found that while
I'd picked up on the clear-to-bottom and clear-to-end-of-line operations, I'd
overlooked the insert/delete lines.  Just so I wouldn't overlook any more of
these, I updated a copy of vttest to test ISO colors and bce (background color
erase).  This patch introduces a new function, ClearCurBackground, whose calls
replace the direct XClearArea calls that I'd overlooked.

(There's also a few compiler warnings fixed, etc ;-)

<H1><A NAME="xterm_15">Patch #15 - 1996/5/29 - XFree86 3.1.2E</A></H1>

This fixes the problem reported by David Dawes, by making the 50msec select
timeout for the Xaw3d arrow scrollbar a resource.  (I made it a boolean for a
variety of reasons -- to make it a number, you'd need an additional resource,
to avoid breaking the logic).

<H1><A NAME="xterm_14">Patch #14 - 1996/5/12 - XFree86 3.1.2Dj</A></H1>

This patch brings the termcap and terminfo descriptions for xterm up to date.
I made the following changes:
<UL>
	<LI>reformatted the terminfo description in a single-column (this is ok
	  for terminfo, and will simplify future patches -- can't do that for
	  termcap, since it would impact buffer requirements on some systems).

	<LI>omitted obsolete features in termcap to save a little space (bs, pt)

	<LI>added color capabilities to termcap (ut, Co, NC, op, AB, AF)

	<LI>corrected some capabilities (vi, ve)

	<LI>added 'st' (set tab)

	<LI>reduced function keys in termcap for 'xterm' to 12 because color
	  capabilities makes that description larger than 1023 characters.

	<LI>created new termcap name 'xtermm' (monochrome) to match the terminfo
	  list, and make that description have 20 function keys.

	<LI>added corresponding color capabilities to terminfo (bce, colors,
	  pairs, op, ncv, setab, setaf)

	<LI>corrected corresponding capabilities in terminfo (civis, cnorm,
	  rmcup, smcup)

	<LI>added capabilities (el1, hts)

	<LI>in both, corrected home/end keys to match the code correction made
	  by Thomas Mueller in 3.1.2Bk

	  <P>=&gt; (I'm still considering modifying the code &amp; description to match
	      the rxvt program).
</UL>

<H1><A NAME="xterm_13">Patch #13 - 1996/4/23 - XFree86 3.1.2Df</A></H1>

This corrects my earlier changes for colors - the inner border of the xterm was
getting painted with the wrong color, since I'd moved the call to set the
background into the logic that tracks SGR information.

<H1><A NAME="xterm_12">Patch #12 - 1996/3/16 - XFree86 3.1.2Dc</A></H1>

This corrects a memory leak in xterm that happens whenever one switches fonts.

<H1><A NAME="xterm_11">Patch #11 - 1996/3/5 - XFree86 3.1.2Db</A></H1>

This patch corrects the behavior of the ANSI colors in xterm when reverse
video is used, as well as some other lesser sins:
<UL>
	<LI>button.c
<UL>
		<LI>(compiler warnings: shadowing of 'time', redundant cast)
</UL>

	<LI>charproc.c
<UL>
		<LI>renamed screen.colors[] array to screen.Acolors[] to more
		easily distinguish the non-ANSI colors from the ANSI colors.

		<LI>moved logic of SGR_Save() into VTInitialize, getting rid of
		local private variables original_fg and original_bg.

		<LI>moved some logic into getXtermForeground and getXtermBackground
		from SGR_Foreground, SGR_Background, etc.

		<LI>corrected misleading 'row' to 'col' in case for CUF, CUB
		sequences.
</UL>

	<LI>ctlseqs.ms
	<LI>xterm.man
<UL>
		<LI>(correct a misconception which I'd added that the color0
		through color6 resource values apply to non-ANSI colors)
</UL>

	<LI>ptyx.h
<UL>
		<LI>added original_fg, original_bg to TScreen structure.
</UL>

	<LI>scrollbar.c
<UL>
		<LI>(compiler warnings: redundant cast)
</UL>

	<LI>util.c
<UL>
		<LI>new functions getXtermForeground and getXtermBackground replace
		the macros GET_FG and GET_BG, with the added functionality of
		checking for the reverse-video status of xterm.

		<LI>in ReverseVideo, swap the SGR foreground and background colors
		also.
</UL>
</UL>

<H1><A NAME="xterm_10">Patch #10 - 1996/2/14 - XFree86 3.1.2Cd</A></H1>

I observed an occasional glitch in the xterm's color behavior; a clear to end
of line would get a color that had been used in a program that supposedly reset
colors.  I traced this down to the way xterm was modifying colors of GC's on
the fly; it didn't restore the original color of the GC, even though it would
later be used in functions (such as ClearRight) that assumed (my error) that
the GC would have the current foreground or background color.
<P>
I fixed this by resetting the GC's colors with a new function 'resetXtermGC()',
and direct calls on SGR_Foreground/SGR_Background, as appropriate and using a
new function 'updatedXtermGC()' to encapsulate the logic that modifies the GC's
color.  (I also removed some commented-out code that was trying to do this --
the problem was a little more obscure).

<H1><A NAME="xterm_09">Patch #9 - 1996/2/10 - XFree86 3.1.2Cb</A></H1>

This patch fixes the remaining problems that I had making xterm run with x11r5,
as well as a couple of other bugs.  It follows my patch from yesterday, that
added ifdef's for some of the input-method resources.
<UL>
	<LI>corrected ifdef's that suppress the input-method code (doesn't
	  exist in my x11r5, and xterm works adequately without it).

	<LI>corrected fallback definition for 'Select()' macro (oops: I'd
	  copied the wrong text...)

	<LI>moved the declarations for the fd_set variables to data.[ch]

	<LI>corrected an ifdef in resize.c (sunos 4.x doesn't have termcap.h)

	<LI>corrected (in main.c) some unused/orphaned variables.
</UL>

<H1><A NAME="xterm_08">Patch #8 - 1996/2/9 - XFree86 3.1.2Cb</A></H1>

This is mostly a documentation patch for xterm.  It describes the color control
sequences in more detail, and documents some other features of xterm that
aren't described elsewhere.
<P>
I've also added a couple of ifdef's to fix (part of) the problem that I'm
working on (making the program work properly on x11r5, where I'm doing memory
testing -- I have a "good" version from mid-January, but my resync version
doesn't work properly on x11r5).  I'm not done with <EM>that</EM> yet.

<H1><A NAME="xterm_07">Patch #7 - 1996/1/28 - XFree86 3.1.2n</A></H1>

I did a (clean) build of 3.1.2n on Linux 1.2.13 (ELF).  I've got an S3 card.
<P>
This fixes the following in the 3.1.2n xterm:
<UL>
	<LI>initialize cur_foreground, cur_background in charproc.c (Purify
	  told me they weren't initialized).

	<LI>add interpretation of codes 39, 49, to reset background and
	  foreground to default value (I'm told that ISO 6429 does this; but I
	  don't have a written reference -- yet -- can anyone help here?).
	  Anyway, rxvt does it, and it'll solve my remaining color management
	  problems.

	<LI>shadowing of 'time' in menu.c

	<LI>'Cardinal' vs 'int' in scrollbar.c

	<LI>several changes to permit compile with X11R5 (the system that I've
	  got Purify on won't be upgraded to X11R6 for a long time).
</UL>
<P>
I built this version (with a minor nit that I'll patch soon) on SunOS 4.1.3 so
that I can test it some more with Purify.
<P>
<EM>btw</EM>:
the changes made in Xpoll.h won't work on some older systems, because
	fd_set isn't a defined type (I've got one machine at least that this
	applies to).

<H1><A NAME="xterm_06">Patch #6 - 1996/1/8</A></H1>

This patch does all of the SGR foreground/background fixes (i.e., clearing the
screen after an SGR color is set causes that color to be used in the foreground
and/or background).  If the FG_COLOR and/or BG_COLOR flags aren't set, then the
xterm foreground and background default to the window's values.  This usage is
consistent with various types of hardware (especially the IBM PC), and is also
used in rxvt.
<UL>
	<LI>charproc.c:
<UL>
		<LI>add/use new macros GET_FG, GET_BG - n/c.

		<LI>add/use new functions SGR_Foreground() and SGR_Background()
		  to set corresponding colors in GC's, and to retain sense of
		  "original" colors.

		  <P>
		  =&gt; This makes redundant some of the corresponding logic
		     in HideCursor to set the foreground and background,
		     but I left it in since it <EM>may</EM> be fixing an unrelated
		     requirement.

		<LI>set GC's in LoadNewFont() according to whether the SGR fg/bg
		  colors are active.

		  <P>
		  =&gt; This fixes some glitches in the accompanying resize,
		     that leaves parts of the window in the original
		     background color.
</UL>

	<LI>screen.c:
<UL>
		<LI>modified ClearBufRows() to use the SGR fg/bg colors if
		  they're set.

		<LI>added function ScrnClearLines(), used this to replace
		  portions of ScrnInsertLine() and ScrnDeleteLine().
		  The new function uses the SGR fg/bg colors if they're
		  set.

		  <P>
		  =&gt; Otherwise, selection after an index or reverse index will
		     paint the wrong colors.

		<LI>modified ScrnDeleteChar() and ScrnInsertChar()
		  to use SGR fg/bg colors.
</UL>

	<LI>util.c:
<UL>
		<LI>modified ClearRight() so that if either of the SGR fg/bg
		  colors is set, we don't bzero the attributes and color
		  arrays, but instead fill them with the appropriate codes.

		<LI>modified ClearLeft to use SGR fg/bg colors.
</UL>
</UL>

<H1><A NAME="xterm_05">Patch #5 - 1996/1/7</A></H1>

This patch modifies the object code, by replacing indexing expressions with
temporary variables with the full indexing expression.  At first glance, this
seems inefficient (it did to me ;-), until remembering comments made in the
compilers newsgroups that trying to "help" the compiler doesn't really work
that well.  A good optimizing compiler can do a better job than the programmer
can.  (There's a moral in the use of 'register' variables also, but I won't fix
those...).
<P>
Anyway, the revised code generates a smaller object...
<UL>
<LI>charproc.c:
<UL>
<LI>recode index expressions in ShowCursor() and HideCursor()
		  using SCRN_BUF_xxxxS macros - changes object.

<LI>replace constant '4' by MAX_PTRS - n/c.
</UL>

<LI>ptyx.h:
<UL>
<LI>defined the SCRN_BUF_xxxxS macros in terms of BUF_xxxxS
		  macros, to pick up references to ScrnBuf data directly, and
		  added MAX_PTRS symbol to pick up those '4' constants strewn
		  about the code - n/c.
</UL>

<LI>screen.c:
<UL>
<LI>recode index expressions in ScreenWrite() using
		  SCRN_BUF_xxxxS macros - changes object.

<LI>replace constant '4' by MAX_PTRS - n/c.

<LI>use macros BUF_CHARS, BUF_ATTRS - n/c.

<LI>cast calloc to 'Char *' to fix compiler warning on IRIX - n/c
</UL>

<LI>scrollbar.c:
<UL>
<LI>replace constant '4' by MAX_PTRS - n/c.

<LI>cast calloc to 'Char *' to fix compiler warning on IRIX - n/c
</UL>
</UL>

<H1><A NAME="xterm_04">Patch #4 - 1996/1/7</A></H1>
When setting up for this phase, I saw that you'd corrected the bug that I found
in ClearLeft.  I decided to make this series of patches anyway, since
readability never hurt (and there's the potential for finding another bug while
reviewing this set).
<UL>
<LI>button.c:
<UL>
<LI>use SCRN_BUF_xxxxS macros - n/c
</UL>
<LI>charproc.c:
<UL>
<LI>use SCRN_BUF_xxxxS macros - n/c
</UL>
<LI>ptyx.h:
<UL>
<LI>added four macros: SCRN_BUF_CHARS, SCRN_BUF_ATTRS,
		  SCRN_BUF_FORES, SCRN_BUF_BACKS to represent the four
		  arrays that are derived from screen-&gt;buf.
</UL>
<LI>screen.c:
<UL>
<LI>use SCRN_BUF_xxxxS macros - n/c
</UL>
<LI>util.c:
<UL>
<LI>use SCRN_BUF_xxxxS macros - n/c
</UL>
</UL>
<H1><A NAME="xterm_03">Patch #3 - 1996/1/7</A></H1>

This is my third (and final cleanup) patch for xterm.  It gets rid of the
unused stuff, and converts several functions to static (thereby reducing their
scope).
<P>
At this point, the only compile warnings I've got (on Linux) are those about
the select arguments (int vs fd_set type), and a missing declaration for
waitpid.  Those both are hard to get right without autoconfigure.
<P>
The next patches will address the functional changes...
<UL>
<LI>Tekproc.c:
<UL>
<LI>changed several functions to 'static' that aren't used
outside this module -- changes object
</UL>
<LI>charproc.c:
<UL>
<LI>changed several functions to 'static' that aren't used
outside this module -- changes object
<LI>deleted unused function unparsefputs -- changes object.
</UL>
<LI>main.c:
<UL>
<LI>changed several functions to 'static' that aren't used
outside this module -- changes object
<LI>ifdef'd out unused function 'consolepr()' -- changes object
<LI>removed unused variable 'dummy_tio' -- changes object
<LI>moved variable 'discipline' to quiet unused-warning -- changes object
</UL>
<LI>main.h:
<UL>
<LI>deleted unused definition of DEFBORDERWIDTH - n/c
</UL>
<LI>misc.c:
<UL>
<LI>changed several functions to 'static' that aren't used
outside this module -- changes object
<LI>provide dummy return statements for xerror and xioerror to
quiet compiler warnings -- changes object
</UL>
<LI>ptyx.h:
<UL>
<LI>change sbuf_address and abuf_address to 'Char *' - n/c
</UL>
<LI>resize.c:
<UL>
<LI>changed several functions to 'static' that aren't used outside this module
-- changes object
</UL>
<LI>screen.c:
<UL>
<LI>remove unnecessary 'Char **' casts - n/c
</UL>
<LI>util.c:
<UL>
<LI>changed several functions to 'static' that aren't used outside this module
-- changes object
</UL>
</UL>
<H1><A NAME="xterm_02">Patch #2 - 1996/1/7</A></H1>
This is my second patch to xterm.  It corrects most of the gcc warnings (except
for some that are due to X header files ;-).  I compared objects to keep track
of the changes that don't affect the object code (n/c) versus those that do.
<P>
At this point, I'm compiling (fairly) clean with gcc options
<PRE>
	-Wall -Wstrict-prototypes -Wmissing-prototypes -Wshadow -Wnested-externs
</PRE>
(I also compiled with -Wshadow, but while that found some things that I wanted
to find, there's far too many warnings from the X headers to be usable in this
context).
<P>
The changes:
<UL>
<LI>Tekproc.c:
<UL>
<LI>parenthesized expression to avoid gcc warning -- n/c.

<LI>corrected nested-extern declaration for Bool
		  waiting_for_initial_map; ourTopLevelShellArgs, and
		  number_ourTopLevelShellArgs - n/c

</UL>
<LI>charproc.c:
<UL>
<LI>corrected potentially-unintialized variables 'scstype', 'xim',
		  and 'input_style' -- changes object.

<LI>adjusted logic of VTparse so that gcc won't warn about setjmp
		  clobbering parsestate -- changes object.

<LI>corrected initialization of 'scstype', which could have been
		  clobbered by setjmp/longjmp - changes object.

<LI>corrected nested-extern declaration of 'term', 'ProgramName'
		  - n/c
</UL>

<LI>cursor.c:
<UL>
<LI>corrected nested-extern declaration of 'term' -- n/c

<LI>renamed 'term' parameters to avoid gcc -Wshadow warning - n/c
</UL>

<LI>input.c:
<UL>
<LI>change interface of StringInput to assume size_t (i.e.,
		  unsigned) nbytes -- changes object.

<LI>change interface of funcvalue, and sunfuncvalue to use
		  'KeySym' type instead of 'int' - changes object.
</UL>

<LI>main.c:
<UL>
<LI>moved definitions of SIGNAL_T, SIGNAL_RETURN to proto.h - n/c

<LI>corrected missing params of 'do_hangup()' -- changes object
		  (note: the missing params were not used).

<LI>corrected missing param of 'Error()' -- changes object

<LI>corrected nested-extern 'environ' - n/c

<LI>adjusted assignments to 'tty_got_hung' and 'no_dev_tty' so
		  that gcc can see they won't be clobbered by the longjmp -
		  changes object.

<LI>use Size_t type - n/c.
</UL>

<LI>menu.c:
<UL>
<LI>removed redundant prototype for 'do_hangup()' -- n/c.

<LI>renamed 'time' parameters to avoid gcc -Wshadow warning - n/c
</UL>

<LI>menu.h:
<UL>
<LI>renamed 'time' parameters to avoid gcc -Wshadow warning - n/c
</UL>

<LI>misc.c:
<UL>
<LI>corrected definition of 'HandleFocusChange()' -- changes
		  object

<LI>cast parameters in call to 'TekExpose()' -- n/c

<LI>corrected nested-extern declarations of 'term', 'toplevel',
		  ProgramName, and 'environ' -- n/c.

<LI>use Size_t type - n/c.
</UL>

<LI>proto.h:
<UL>
<LI>moved definition of SIGNAL_T (and SIGNAL_RETURN) here from
		  main.c, resize.c to allow use of this symbol in prototypes
		  (mostly in xterm.h).

<LI>added definition 'Size_t' to use as corrected type for
		  strncpy, malloc sizes - n/c.
</UL>

<LI>resize.c:
<UL>
<LI>moved SIGNAL_T definition to proto.h -- n/c.

<LI>use Size_t type - n/c.
</UL>

<LI>screen.c:
<UL>
<LI>use Size_t type - n/c.
</UL>

<LI>tabs.c:
<UL>
<LI>corrected nested-extern declaration of 'term' -- n/c
</UL>

<LI>util.c:
<UL>
<LI>corrected/supplied parameters to 'TekExpose()' -- changes
		  object (note:  'TekExpose()' doesn't use its parameters).

<LI>corrected nested-extern declaration of
		  'waiting_for_initial_map' -- n/c.

<LI>renamed 'term' parameters to avoid gcc -Wshadow warning - n/c
</UL>

<LI>xterm.h:
<UL>
<LI>prototype 'do_hangup()', 'HandleFocusChange()',
		  'TekExpose()', 'Error()', 'Exit()' - forces changes in
		  various places.

<LI>adjusted prototypes that pass 'Boolean' arguments to use
		  'int' (this is the "correct" ANSI approach to extended
		  compiles; it's worth mentioning that gcc doesn't meet the
		  ANSI spec here).  I used gcc -Wconversion to find these, but
		  there's a lot of unrelated warnings that are due to setting
		  NARROWPROTO in the config - n/c.

<LI>renamed 'term' parameters to avoid gcc -Wshadow warning - n/c
</UL>
</UL>
<H1><A NAME="xterm_01">Patch #1 - 1996/1/6</A></H1>
This is my first cleanup patch for xterm.  It addresses all of the gcc warnings
for -Wall, -Wmissing-prototypes and -Wstrict-prototypes that I can change
without modifying the object code.  (I'm compiling this with gcc 2.7.0 for an
aout target, which makes it simple to compare objects.  When I do ELF-only,
I've got a tool that compares that sort of thing as well).
<P>
Briefly, this patch adds (and uses) two header files in the xterm directory:
<PRE>
	proto.h
	xterm.h
</PRE>
I expect this to be the biggest patch by far.  However (barring a misplaced
prototype), it shouldn't break anything, since the intent of the patch is to
provide missing declarations.
</BODY>
</HTML>
